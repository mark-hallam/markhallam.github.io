<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DAC v3.0 — Declarative Agent Compilation | Context Engineering for Autonomous AI Agents</title>
<meta name="description" content="Declarative Agent Compilation (DAC) is a context engineering methodology — compiling human intent into autonomous AI agent execution plans with intelligent model routing.">
<meta name="keywords" content="prompt compilation, context engineering, Claude Code, AI coding, agent-first, DAG, parallel execution, session packages, model routing, Opus, Sonnet, GYSOM">
<meta name="author" content="Mark Hallam">
<meta property="og:title" content="DAC v3.0 — Declarative Agent Compilation | Context Engineering for Autonomous AI Agents">
<meta property="og:description" content="Compile human intent into autonomous AI execution plans with intelligent model routing. A context engineering methodology. Open source under MIT license.">
<meta property="og:type" content="website">
<meta property="og:url" content="https://markhallam.com.au">
<link rel="canonical" href="https://markhallam.com.au">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<style>
/* ── Reset & Base ─────────────────────────────────── */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  --navy: #1B4F72;
  --navy-dark: #154360;
  --blue: #2E86C1;
  --blue-light: #D4E6F1;
  --blue-pale: #EBF5FB;
  --dark: #1C1C1C;
  --body: #374151;
  --muted: #6B7280;
  --light-bg: #F8FAFC;
  --code-bg: #F4F6F7;
  --code-border: #D5DBDB;
  --white: #FFFFFF;
  --green: #27AE60;
  --green-pale: #EAFAF1;
  --amber: #F59E0B;
  --amber-pale: #FFF8E1;
  --max-w: 960px;
  --font-ui: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
  --font-body: Georgia, 'Times New Roman', serif;
  --font-mono: 'SF Mono', 'Fira Code', 'Consolas', monospace;
}

html { scroll-behavior: smooth; }

body {
  font-family: var(--font-body);
  color: var(--body);
  background: var(--white);
  line-height: 1.7;
  -webkit-font-smoothing: antialiased;
}

a { color: var(--blue); text-decoration: none; transition: color 0.2s; }
a:hover { color: var(--navy); }

.container { max-width: var(--max-w); margin: 0 auto; padding: 0 24px; }

/* ── Navigation ───────────────────────────────────── */
nav {
  position: fixed; top: 0; left: 0; right: 0; z-index: 100;
  background: rgba(255,255,255,0.95); backdrop-filter: blur(12px);
  border-bottom: 1px solid var(--blue-light);
  padding: 0 24px;
}
nav .nav-inner {
  max-width: var(--max-w); margin: 0 auto; position: relative;
  display: flex; align-items: center; justify-content: center;
  height: 60px;
}
nav .logo {
  position: absolute; left: 0;
  font-family: var(--font-ui); font-weight: 800; font-size: 20px;
  color: var(--navy); letter-spacing: -0.5px;
}
nav .nav-links { display: flex; gap: 28px; list-style: none; }
nav .nav-links a {
  font-family: var(--font-ui); font-size: 14px; font-weight: 500;
  color: var(--muted); transition: color 0.2s;
}
nav .nav-links a:hover { color: var(--navy); }

.mobile-toggle { display: none; background: none; border: none; cursor: pointer; padding: 8px; }
.mobile-toggle span { display: block; width: 20px; height: 2px; background: var(--navy); margin: 4px 0; transition: 0.3s; }

/* ── Hero ─────────────────────────────────────────── */
.hero {
  padding: 140px 24px 80px;
  text-align: center;
  background: linear-gradient(180deg, var(--blue-pale) 0%, var(--white) 100%);
}
.hero h1 {
  font-family: var(--font-ui); font-size: 64px; font-weight: 800;
  color: var(--navy); letter-spacing: -2px; margin-bottom: 12px;
}
.hero .tagline {
  font-family: var(--font-ui); font-size: 20px; font-weight: 500;
  color: var(--blue); margin-bottom: 8px;
}
.hero .subtitle {
  font-family: var(--font-ui); font-size: 14px; font-weight: 500;
  color: var(--muted); text-transform: uppercase; letter-spacing: 2px;
  margin-bottom: 28px;
}
.hero p {
  max-width: 640px; margin: 0 auto 36px; font-size: 18px; color: var(--body);
  line-height: 1.8;
}
.hero .cta-group { display: flex; gap: 16px; justify-content: center; flex-wrap: wrap; }

.btn {
  display: inline-flex; align-items: center; gap: 8px;
  font-family: var(--font-ui); font-size: 15px; font-weight: 600;
  padding: 14px 28px; border-radius: 8px; border: none; cursor: pointer;
  transition: all 0.2s ease;
}
.btn-primary { background: var(--navy); color: var(--white); }
.btn-primary:hover { background: var(--navy-dark); transform: translateY(-1px); box-shadow: 0 4px 12px rgba(27,79,114,0.3); color: var(--white); }
.btn-secondary { background: var(--white); color: var(--navy); border: 2px solid var(--navy); }
.btn-secondary:hover { background: var(--blue-pale); transform: translateY(-1px); color: var(--navy); }

/* ── Sections ─────────────────────────────────────── */
section { padding: 80px 0; }
section.alt-bg { background: var(--light-bg); }

.section-header {
  text-align: center; margin-bottom: 56px;
}
.section-header h2 {
  font-family: var(--font-ui); font-size: 36px; font-weight: 700;
  color: var(--navy); margin-bottom: 12px; letter-spacing: -0.5px;
}
.section-header p {
  font-size: 17px; color: var(--muted); max-width: 600px; margin: 0 auto;
}

/* ── What Section ─────────────────────────────────── */
.what-grid {
  display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 32px;
}
.what-card {
  background: var(--white); border: 1px solid var(--blue-light);
  border-radius: 12px; padding: 32px; transition: transform 0.2s, box-shadow 0.2s;
}
.what-card:hover { transform: translateY(-4px); box-shadow: 0 8px 24px rgba(27,79,114,0.08); }
.what-card .icon {
  width: 48px; height: 48px; background: var(--blue-pale); border-radius: 10px;
  display: flex; align-items: center; justify-content: center;
  margin-bottom: 20px; font-size: 22px;
}
.what-card h3 {
  font-family: var(--font-ui); font-size: 18px; font-weight: 700;
  color: var(--navy); margin-bottom: 10px;
}
.what-card p { font-size: 15px; color: var(--body); line-height: 1.65; }

/* ── Pipeline ─────────────────────────────────────── */
.pipeline {
  display: flex; align-items: flex-start; gap: 0; position: relative;
  overflow-x: auto; padding-bottom: 12px;
}
.pipeline-step {
  flex: 1; min-width: 160px; text-align: center; position: relative;
  padding: 0 8px;
}
.pipeline-step .step-num {
  width: 44px; height: 44px; border-radius: 50%;
  background: var(--navy); color: var(--white);
  font-family: var(--font-ui); font-weight: 700; font-size: 16px;
  display: flex; align-items: center; justify-content: center;
  margin: 0 auto 14px; position: relative; z-index: 2;
}
.pipeline-step h4 {
  font-family: var(--font-ui); font-size: 14px; font-weight: 700;
  color: var(--navy); margin-bottom: 6px;
}
.pipeline-step p {
  font-size: 13px; color: var(--muted); line-height: 1.5;
}
.pipeline-step:not(:last-child)::after {
  content: ''; position: absolute;
  top: 22px; left: calc(50% + 22px); right: calc(-50% + 22px);
  height: 2px; background: var(--blue-light); z-index: 1;
}

/* ── Execution Demo ───────────────────────────────── */
.exec-demo {
  background: var(--dark); border-radius: 12px; padding: 28px 32px;
  font-family: var(--font-mono); font-size: 14px; color: #E5E7EB;
  line-height: 1.9; overflow-x: auto; margin-top: 40px;
  border: 1px solid #374151;
}
.exec-demo .comment { color: #6B7280; }
.exec-demo .layer { color: #60A5FA; font-weight: 600; }
.exec-demo .session { color: #34D399; }
.exec-demo .arrow { color: #F59E0B; }
.exec-demo .pipe { color: #A78BFA; }
.exec-demo .meta { color: #9CA3AF; }
.exec-demo .model-tag { color: #F472B6; font-size: 12px; }

/* ── Get Started / Code Blocks ────────────────────── */
.tabs { display: flex; gap: 0; margin-bottom: 0; }
.tab-btn {
  font-family: var(--font-ui); font-size: 14px; font-weight: 600;
  padding: 12px 24px; border: 1px solid var(--code-border);
  background: var(--code-bg); color: var(--muted); cursor: pointer;
  border-bottom: none; border-radius: 8px 8px 0 0; transition: all 0.2s;
}
.tab-btn.active { background: var(--white); color: var(--navy); border-bottom: 1px solid var(--white); margin-bottom: -1px; position: relative; z-index: 2; }
.tab-btn:not(.active):hover { background: var(--blue-pale); }

.tab-content { display: none; }
.tab-content.active { display: block; }

.code-wrapper {
  position: relative; border: 1px solid var(--code-border);
  border-radius: 0 8px 8px 8px; overflow: hidden;
}
.code-block {
  background: var(--white); padding: 24px;
  font-family: var(--font-mono); font-size: 13px; line-height: 1.7;
  color: var(--dark); overflow-x: auto; max-height: 500px; overflow-y: auto;
  white-space: pre-wrap; word-wrap: break-word;
}
.copy-btn {
  position: absolute; top: 12px; right: 12px; z-index: 5;
  font-family: var(--font-ui); font-size: 12px; font-weight: 600;
  padding: 6px 14px; border-radius: 6px;
  background: var(--navy); color: var(--white); border: none; cursor: pointer;
  transition: all 0.2s; opacity: 0.9;
}
.copy-btn:hover { opacity: 1; transform: scale(1.02); }
.copy-btn.copied { background: #059669; }

.setup-instructions {
  background: var(--blue-pale); border-radius: 12px; padding: 24px 28px;
  margin-bottom: 32px;
}
.setup-instructions h3 {
  font-family: var(--font-ui); font-size: 16px; font-weight: 700;
  color: var(--navy); margin-bottom: 8px;
}
.setup-instructions p { font-size: 15px; color: var(--body); }
.setup-instructions code {
  background: var(--white); padding: 2px 6px; border-radius: 4px;
  font-family: var(--font-mono); font-size: 13px; color: var(--navy);
}

/* ── Download Section ─────────────────────────────── */
.download-card {
  text-align: center; background: var(--white); border: 2px solid var(--blue-light);
  border-radius: 16px; padding: 48px 32px; max-width: 560px; margin: 0 auto;
}
.download-card .file-icon {
  font-size: 48px; margin-bottom: 16px;
}
.download-card h3 {
  font-family: var(--font-ui); font-size: 22px; font-weight: 700;
  color: var(--navy); margin-bottom: 8px;
}
.download-card .meta {
  font-family: var(--font-ui); font-size: 14px; color: var(--muted);
  margin-bottom: 24px;
}
.download-card .btn { font-size: 16px; padding: 16px 36px; }

/* ── Comparison Section ──────────────────────────── */
.comparison-grid {
  display: grid; grid-template-columns: 1fr 1fr; gap: 32px;
  margin-top: 40px;
}
.comparison-card {
  background: var(--white); border-radius: 12px; padding: 28px;
  border: 1px solid var(--blue-light);
}
.comparison-card h3 {
  font-family: var(--font-ui); font-size: 17px; font-weight: 700;
  margin-bottom: 12px;
}
.comparison-card p {
  font-size: 15px; color: var(--body); line-height: 1.65;
}
.comparison-card .tag {
  display: inline-block; font-family: var(--font-ui); font-size: 11px;
  font-weight: 700; text-transform: uppercase; letter-spacing: 1px;
  padding: 4px 10px; border-radius: 4px; margin-bottom: 12px;
}
.tag-dac { background: var(--blue-pale); color: var(--navy); }
.tag-sonnet { background: var(--green-pale); color: var(--green); }
.tag-both { background: var(--amber-pale); color: #92400E; }

.benchmark-table {
  width: 100%; font-family: var(--font-ui); font-size: 14px;
  border-collapse: collapse; margin-top: 24px;
}
.benchmark-table th {
  text-align: left; padding: 10px 14px; color: var(--navy);
  border-bottom: 2px solid var(--blue-light); font-weight: 700;
}
.benchmark-table td {
  padding: 10px 14px; border-bottom: 1px solid var(--blue-light);
}
.benchmark-table .highlight { color: var(--green); font-weight: 600; }

/* ── Contact Form ─────────────────────────────────── */
.contact-form {
  max-width: 560px; margin: 0 auto;
}
.form-group { margin-bottom: 20px; }
.form-group label {
  display: block; font-family: var(--font-ui); font-size: 14px;
  font-weight: 600; color: var(--navy); margin-bottom: 6px;
}
.form-group input, .form-group textarea {
  width: 100%; padding: 12px 16px; border: 1px solid var(--code-border);
  border-radius: 8px; font-family: var(--font-body); font-size: 15px;
  color: var(--dark); transition: border-color 0.2s; background: var(--white);
}
.form-group input:focus, .form-group textarea:focus {
  outline: none; border-color: var(--blue);
  box-shadow: 0 0 0 3px rgba(46,134,193,0.1);
}
.form-group textarea { min-height: 140px; resize: vertical; }

/* ── Footer ───────────────────────────────────────── */
footer {
  background: var(--navy-dark); color: var(--white); padding: 48px 24px 32px;
}
footer .footer-inner {
  max-width: var(--max-w); margin: 0 auto;
  display: flex; justify-content: space-between; align-items: flex-start;
  flex-wrap: wrap; gap: 32px;
}
footer .footer-brand h3 {
  font-family: var(--font-ui); font-size: 20px; font-weight: 800;
  margin-bottom: 8px;
}
footer .footer-brand p { font-size: 14px; color: #93C5FD; max-width: 320px; }
footer .social-links { display: flex; gap: 20px; margin-top: 16px; }
footer .social-links a {
  color: #93C5FD; font-family: var(--font-ui); font-size: 14px;
  font-weight: 500; transition: color 0.2s;
}
footer .social-links a:hover { color: var(--white); }
footer .footer-legal {
  text-align: right;
}
footer .footer-legal p {
  font-family: var(--font-ui); font-size: 13px; color: #93C5FD;
  margin-bottom: 4px;
}

/* ── Responsive ───────────────────────────────────── */
@media (max-width: 768px) {
  .hero h1 { font-size: 40px; letter-spacing: -1px; }
  .hero .tagline { font-size: 17px; }
  .hero p { font-size: 16px; }
  .what-grid { grid-template-columns: 1fr; gap: 20px; }
  .comparison-grid { grid-template-columns: 1fr; }
  .pipeline { flex-direction: column; align-items: center; }
  .pipeline-step { min-width: auto; width: 100%; max-width: 280px; }
  .pipeline-step:not(:last-child)::after { display: none; }
  nav .nav-links { display: none; }
  nav .nav-links.open {
    display: flex; flex-direction: column; position: absolute;
    top: 60px; left: 0; right: 0; background: var(--white);
    padding: 16px 24px; border-bottom: 1px solid var(--blue-light);
    gap: 12px;
  }
  .mobile-toggle { display: block; }
  footer .footer-inner { flex-direction: column; text-align: center; }
  footer .footer-legal { text-align: center; }
  footer .social-links { justify-content: center; }
  .section-header h2 { font-size: 28px; }
  section { padding: 56px 0; }
}
</style>
</head>
<body>

<!-- ── Navigation ──────────────────────────────────── -->
<nav>
  <div class="nav-inner">
    <a href="#" class="logo">DAC</a>
    <button class="mobile-toggle" onclick="document.querySelector('.nav-links').classList.toggle('open')" aria-label="Toggle menu">
      <span></span><span></span><span></span>
    </button>
    <ul class="nav-links">
      <li><a href="#how">How It Works</a></li>
      <li><a href="#case-study">Case Study</a></li>
      <li><a href="#contact">Contact</a></li>
      <li><a href="https://github.com/mark-hallam/DAC-Declarative-Agent-Compilation" target="_blank" rel="noopener">GitHub</a></li>
    </ul>
  </div>
</nav>

<!-- ── Hero ─────────────────────────────────────────── -->
<section class="hero">
  <div class="container">
    <p class="subtitle">Context Engineering &bull; Open Source &bull; MIT License &bull; v3.0 &bull; <span style="opacity:0.7">formerly GYSOM</span> &bull; by Mark Hallam</p>
    <h1>Declarative Agent Compilation</h1>
    <p class="tagline">Declare intent. Compile sessions. Execute autonomously.</p>
    <p>A context engineering methodology that compiles human intent into autonomous AI agent execution plans with intelligent model routing, effort-aware dispatch, and fully autonomous phase progression. Two messages to compile. One command to execute. Zero stops in between. Tuned for Claude Opus 4.6 and Sonnet 4.6.</p>
    <div class="cta-group">
      <a href="#start" class="btn btn-primary">Get Started</a>
      <a href="https://github.com/mark-hallam/DAC-Declarative-Agent-Compilation" class="btn btn-secondary" target="_blank" rel="noopener">View on GitHub</a>
    </div>
  </div>
</section>

<!-- ── What Is DAC? ──────────────────────────────── -->
<section id="what">
  <div class="container">
    <div class="section-header">
      <h2>What Is DAC?</h2>
      <p>A context engineering methodology that treats AI coding agents as compilation targets, not conversational partners.</p>
    </div>
    <div class="what-grid">
      <div class="what-card">
        <div class="icon">&#x1F6AB;</div>
        <h3>The Problem</h3>
        <p>Conversational prompting degrades as projects grow. Context windows exhaust, agents pause for decisions mid-execution, and parallelisable work runs sequentially. Hours are lost to interruptions, manual decomposition, and paying Opus prices for tasks Sonnet can handle.</p>
      </div>
      <div class="what-card">
        <div class="icon">&#x2699;&#xFE0F;</div>
        <h3>DAC</h3>
        <p>The methodology introduces declarative agent compilation as a context engineering pattern. You provide complete input once, and the methodology compiles it into sized, verified session packages with explicit file paths, dependency graphs, model-tier routing, effort-aware dispatch, and conflict-free parallel execution.</p>
      </div>
      <div class="what-card">
        <div class="icon">&#x26A1;</div>
        <h3>The Result</h3>
        <p>A single prompt triggers autonomous layer-by-layer execution. Sessions cascade through parallel branches as subagents, each assigned the optimal model tier and effort level, self-verifying on completion. Example: 34 sessions across 8 layers with up to 7 concurrent branches, all from one entry point:</p>
      </div>
    </div>
  </div>
</section>

<!-- ── Who It's For ─────────────────────────────────── -->
<section id="who" class="alt-bg">
  <div class="container">
    <div class="section-header">
      <h2>Who It's For</h2>
      <p>DAC benefits anyone building with AI coding agents. Here's how it helps at every level.</p>
    </div>
    <div class="what-grid">
      <div class="what-card">
        <div class="icon">&#x1F680;</div>
        <h3>Solo Developers</h3>
        <p>Stop babysitting your agent through 50 back-and-forth messages. Describe your project once, answer the decision batch, and walk away while sessions execute in parallel. What used to take a full day of interrupted prompting now runs autonomously while you do something else.</p>
      </div>
      <div class="what-card">
        <div class="icon">&#x1F3D7;&#xFE0F;</div>
        <h3>Founders &amp; Non-Technical Builders</h3>
        <p>You don't need to know how to code or how to structure prompts. Describe what you want built in plain language. DAC harvests every decision upfront with recommended defaults, then compiles the entire build into executable sessions. You get a working project without needing to manage the technical details.</p>
      </div>
      <div class="what-card">
        <div class="icon">&#x1F465;</div>
        <h3>Development Teams</h3>
        <p>The methodology's session packages, CLAUDE.md source of truth, and conflict matrices give teams a shared, version-controlled structure for AI-assisted builds. Every team member works from the same architecture decisions. No drift. No conflicting assumptions. No "I thought we were using Postgres."</p>
      </div>
      <div class="what-card">
        <div class="icon">&#x23F1;&#xFE0F;</div>
        <h3>Speed-Focused Builders</h3>
        <p>Parallel execution is the headline feature. Instead of building features one at a time, DAC dispatches independent sessions simultaneously across execution layers. A 34-session project doesn't take 34x the time &mdash; sessions in the same layer complete concurrently, collapsing total build time dramatically.</p>
      </div>
      <div class="what-card">
        <div class="icon">&#x1F4B0;</div>
        <h3>Cost-Conscious Teams</h3>
        <p>v3 introduces intelligent model routing. Foundation and integration sessions run on Opus 4.6 for maximum quality. Independent features, tests, and UI components run on Sonnet 4.6 at 40% lower cost per session. A typical build sees 60-70% of sessions on Sonnet without quality loss. Every session includes a cost estimate.</p>
      </div>
      <div class="what-card">
        <div class="icon">&#x1F504;</div>
        <h3>Iterators &amp; Evolvers</h3>
        <p>Projects change. DAC handles iteration through delta sessions &mdash; only the sessions affected by a change are regenerated. The CLAUDE.md is version-incremented, an impact report shows exactly what's affected versus untouched, and a new execution map covers only the sessions that need to re-run. No full rebuilds for a scope change.</p>
      </div>
    </div>
  </div>
</section>

<!-- ── How It Works ─────────────────────────────────── -->
<section id="how">
  <div class="container">
    <div class="section-header">
      <h2>How It Works</h2>
      <p>A five-phase prompt compilation pipeline from human intent to autonomous execution.</p>
    </div>
    <div class="pipeline">
      <div class="pipeline-step">
        <div class="step-num">1</div>
        <h4>Decision Harvesting</h4>
        <p>Extract every decision upfront. Tech stack, design, business logic, scope, model budget preference. Batch with recommended defaults. Human answers once.</p>
      </div>
      <div class="pipeline-step">
        <div class="step-num">2</div>
        <h4>DAG Analysis</h4>
        <p>Analyse all tasks as a Directed Acyclic Graph. Map dependencies. Identify parallel workstreams. Calculate critical path. Assign model tier and effort level to each task.</p>
      </div>
      <div class="pipeline-step">
        <div class="step-num">3</div>
        <h4>Session Packages</h4>
        <p>Decompose DAG into sized sessions. Target 15-25 files each. Self-contained with model assignment, token budget, cost estimate, and explicit file paths.</p>
      </div>
      <div class="pipeline-step">
        <div class="step-num">4</div>
        <h4>Parallel Execution</h4>
        <p>Conflict matrix ensures zero file collisions. Sessions dispatch as parallel subagents at their assigned model tier. Layers cascade autonomously from a single orchestrator.</p>
      </div>
      <div class="pipeline-step">
        <div class="step-num">5</div>
        <h4>Verification</h4>
        <p>Every session ends with mandatory type check, lint, test, build, and structured handoff state. Auto-retry on failure with Sonnet-to-Opus escalation for persistent issues.</p>
      </div>
    </div>

    <!-- Complete Build Execution Map -->
    <div class="exec-demo" style="max-width:880px; margin:40px auto 0; font-size:12px; line-height:1.7;">
<pre style="margin:0; font-family:inherit; font-size:inherit; color:inherit; background:transparent; border:none; padding:0; white-space:pre; overflow-x:auto;">
<span class="arrow">╔══════════════════════════════════════════════════════════════════════════════════╗</span>
<span class="arrow">║</span>                    <span class="layer" style="font-size:14px;">PINDEO — GYSOM BUILD COMPLETE</span>                                <span class="arrow">║</span>
<span class="arrow">║</span>                    <span class="meta">69 commits · 102k lines · 510 files · 49h 9m</span>                <span class="arrow">║</span>
<span class="arrow">╚══════════════════════════════════════════════════════════════════════════════════╝</span>

<span class="layer">PHASE 1 — SCAFFOLD</span>  <span class="meta">(30 commits, 68,435 lines)</span>
<span class="pipe">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span>
  <span class="layer">LAYER 0 — Foundation</span> <span class="meta">[sequential]</span>
  ├─ <span class="session">S01</span>  Monorepo scaffold (Turborepo, pnpm workspaces, TS config)          <span class="arrow">✅</span>
  └─ <span class="session">S02</span>  Shared packages (types, constants, utils, config)                  <span class="arrow">✅</span>
  <span class="layer">LAYER 1 — Scaffolds + Infra</span> <span class="meta">[parallel ×5]</span>
  ├─ <span class="session">S03</span>  Fastify server scaffold + complete Prisma schema                   <span class="arrow">✅</span>
  ├─ <span class="session">S04</span>  Python agent service scaffold (FastAPI, base agent class)          <span class="arrow">✅</span>
  ├─ <span class="session">S05</span>  UI component library (shadcn/ui, custom components)                <span class="arrow">✅</span>
  ├─ <span class="session">S06</span>  Docker Compose, Dockerfiles, GitHub Actions CI                     <span class="arrow">✅</span>
  └─ <span class="session">S07</span>  Auth module (Clerk) + tRPC router scaffold                         <span class="arrow">✅</span>
  <span class="layer">LAYER 2 — Core Services</span> <span class="meta">[parallel ×4]</span>
  ├─ <span class="session">S08</span>  Redis client + BullMQ job queues + Socket.io WebSocket             <span class="arrow">✅</span>
  ├─ <span class="session">S09</span>  LangGraph orchestrator + memory system + MCP tools                 <span class="arrow">✅</span>
  ├─ <span class="session">S10</span>  Content module (CRUD, calendar, scheduling)                        <span class="arrow">✅</span>
  └─ <span class="session">S11</span>  Social connections module (OAuth, webhooks, platform clients)      <span class="arrow">✅</span>
  <span class="layer">LAYER 3 — Domain Modules</span> <span class="meta">[parallel ×6]</span>
  ├─ <span class="session">S12</span>  Analytics module (ClickHouse + MeiliSearch)                        <span class="arrow">✅</span>
  ├─ <span class="session">S13</span>  Billing module (Stripe subscriptions + usage tracking)             <span class="arrow">✅</span>
  ├─ <span class="session">S14</span>  Brand profiles + asset library + website management                <span class="arrow">✅</span>
  ├─ <span class="session">S15</span>  Trend Research + Audience Analysis specialist agents               <span class="arrow">✅</span>
  ├─ <span class="session">S16</span>  Content Strategy + Content Creator specialist agents               <span class="arrow">✅</span>
  └─ <span class="session">S17</span>  Visual/Media + SEO &amp; Hashtag specialist agents                     <span class="arrow">✅</span>
  <span class="layer">LAYER 4 — Frontend + Agents</span> <span class="meta">[parallel ×7]</span>
  ├─ <span class="session">S18</span>  Community Manager + Analytics Reporting specialist agents          <span class="arrow">✅</span>
  ├─ <span class="session">S19</span>  Next.js 15 scaffold (Clerk auth, tRPC client, dashboard shell)     <span class="arrow">✅</span>
  ├─ <span class="session">S20</span>  Content list, create, edit pages + social connections UI           <span class="arrow">✅</span>
  ├─ <span class="session">S21</span>  Content calendar UI + social connections pages                     <span class="arrow">✅</span>
  ├─ <span class="session">S22</span>  Analytics dashboard + billing management pages                     <span class="arrow">✅</span>
  ├─ <span class="session">S23</span>  Website builder (GrapeJS editor)                                   <span class="arrow">✅</span>
  └─ <span class="session">S24</span>  Chat interface + agent activity &amp; approval dashboard               <span class="arrow">✅</span>
  <span class="layer">LAYER 5 — Complex Features</span> <span class="meta">[parallel ×5]</span>
  ├─ <span class="session">S25</span>  Brand management + settings + onboarding flow                      <span class="arrow">✅</span>
  ├─ <span class="session">S26</span>  Expo mobile app (Clerk auth, tRPC, dashboard, chat, approvals)     <span class="arrow">✅</span>
  ├─ <span class="session">S27</span>  Mobile offline support (SQLite cache, background sync)             <span class="arrow">✅</span>
  ├─ <span class="session">S28</span>  Tauri v2 desktop app scaffold                                      <span class="arrow">✅</span>
  └─ <span class="session">S29</span>  WhatsApp Business + Slack communication integrations               <span class="arrow">✅</span>
  <span class="layer">LAYER 6 — Integration + Infra</span> <span class="meta">[parallel ×4]</span>
  ├─ <span class="session">S30</span>  Agent ↔ API bridge + Langfuse observability                        <span class="arrow">✅</span>
  ├─ <span class="session">S31</span>  Additional shadcn/ui components                                    <span class="arrow">✅</span>
  ├─ <span class="session">S32</span>  Playwright E2E test suite                                          <span class="arrow">✅</span>
  ├─ <span class="session">S33</span>  Integration test suite + k6 load tests                             <span class="arrow">✅</span>
  └─ <span class="session">S34</span>  Terraform AWS infrastructure + GitHub Actions deploy pipeline      <span class="arrow">✅</span>
  <span class="model-tag">MILESTONE: rename Smugz → Pindeo across entire codebase                   ✅</span>

<span class="layer">PHASE 2 — WIRING</span>  <span class="meta">(8 commits, 5,132 lines)</span>
<span class="pipe">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span>
  <span class="layer">LAYER 1</span> <span class="meta">[parallel ×4]</span>
  ├─ <span class="session">P2-S01</span>  API router registration + package builds                        <span class="arrow">✅</span>
  ├─ <span class="session">P2-S02</span>  Prisma middleware (tenant isolation, soft deletes)              <span class="arrow">✅</span>
  ├─ <span class="session">P2-S03</span>  Clerk auth middleware wired end-to-end                          <span class="arrow">✅</span>
  └─ <span class="session">P2-S04</span>  tRPC procedures protected with auth context                    <span class="arrow">✅</span>
  <span class="layer">LAYER 2</span> <span class="meta">[parallel ×2]</span>
  ├─ <span class="session">P2-S05</span>  Database seed data                                              <span class="arrow">✅</span>
  └─ <span class="session">P2-S06</span>  Python agent config wired to API                               <span class="arrow">✅</span>
  <span class="layer">LAYER 3</span> <span class="meta">[sequential]</span>
  ├─ <span class="session">P2-S07</span>  End-to-end Clerk auth with protected tRPC procedures            <span class="arrow">✅</span>
  ├─ <span class="session">P2-S08</span>  Web: replace all mock hooks with real tRPC queries              <span class="arrow">✅</span>
  ├─ <span class="session">P2-S09</span>  Dev scripts, Makefile, docker-compose updates                   <span class="arrow">✅</span>
  ├─ <span class="session">P2-S10</span>  Error boundaries + loading skeletons for all routes             <span class="arrow">✅</span>
  ├─ <span class="session">P2-S11</span>  Stripe webhooks + subscription lifecycle + usage limits         <span class="arrow">✅</span>
  └─ <span class="session">P2-S12</span>  CORS, rate limits, security headers, Docker hardening           <span class="arrow">✅</span>

<span class="layer">PHASE 3 — INTEGRATIONS</span>  <span class="meta">(9 commits, 17,506 lines)</span>
<span class="pipe">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span>
  <span class="layer">LAYER 1</span> <span class="meta">[parallel ×4]</span>
  ├─ <span class="session">P3-S01</span>  Social OAuth — YouTube, Instagram, TikTok, Twitter, Facebook    <span class="arrow">✅</span>
  ├─ <span class="session">P3-S02</span>  Social OAuth — LinkedIn, Pinterest, Threads, Bluesky, Snapchat  <span class="arrow">✅</span>
  ├─ <span class="session">P3-S03</span>  Mobile — all screens wired to real tRPC queries                 <span class="arrow">✅</span>
  └─ <span class="session">P3-S04</span>  ClickHouse aggregation queries + Postgres fallback              <span class="arrow">✅</span>
  <span class="layer">LAYER 2</span> <span class="meta">[parallel ×4]</span>
  ├─ <span class="session">P3-S05</span>  WhatsApp Business Cloud API + webhooks                          <span class="arrow">✅</span>
  ├─ <span class="session">P3-S06</span>  Slack bot (events, interactions, Block Kit)                     <span class="arrow">✅</span>
  ├─ <span class="session">P3-S07</span>  Cross-platform publishing pipeline + content scheduler          <span class="arrow">✅</span>
  └─ <span class="session">P3-S08</span>  Real-time agent chat with streaming responses                   <span class="arrow">✅</span>
  <span class="layer">LAYER 3</span> <span class="meta">[parallel ×3]</span>
  ├─ <span class="session">P3-S09</span>  Push notifications (web-push) + email (Resend)                  <span class="arrow">✅</span>
  ├─ <span class="session">P3-S10</span>  Analytics dashboard wired to real ClickHouse data               <span class="arrow">✅</span>
  └─ <span class="session">P3-S11</span>  Content publishing UI (platform previews + scheduling)          <span class="arrow">✅</span>
  <span class="layer">LAYER 4</span> <span class="meta">[parallel ×2]</span>
  ├─ <span class="session">P3-S12</span>  Integration tests (social OAuth, comms, publishing, chat)       <span class="arrow">✅</span>
  └─ <span class="session">P3-S13</span>  Phase 3 plan + remaining wiring                                 <span class="arrow">✅</span>

<span class="layer">PHASE 4 — PRODUCTION FEATURES</span>  <span class="meta">(12 commits, 12,837 lines)</span>
<span class="pipe">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span>
  <span class="layer">LAYER 1</span> <span class="meta">[parallel ×2]</span>
  ├─ <span class="session">P4-S01</span>  Website deploy pipeline (HTML gen, S3, CloudFront invalidation) <span class="arrow">✅</span>
  └─ <span class="session">P4-S02</span>  Agent orchestration (HTTP trigger, HMAC callback, task exec)    <span class="arrow">✅</span>
  <span class="layer">LAYER 2</span> <span class="meta">[parallel ×4]</span>
  ├─ <span class="session">P4-S03</span>  Settings module (user prefs, team management, API keys)         <span class="arrow">✅</span>
  ├─ <span class="session">P4-S04</span>  OpenTelemetry (NodeSDK, 8 metrics, distributed tracing)         <span class="arrow">✅</span>
  ├─ <span class="session">P4-S05</span>  Onboarding → real agent activation                              <span class="arrow">✅</span>
  └─ <span class="session">P4-S06</span>  Mobile offline-first SQLite (migrations, cache, stale-while-R)  <span class="arrow">✅</span>
  <span class="layer">LAYER 3</span> <span class="meta">[parallel ×3]</span>
  ├─ <span class="session">P4-S07</span>  Desktop native features + GitHub Actions release pipeline       <span class="arrow">✅</span>
  ├─ <span class="session">P4-S08</span>  Agent cost tracking + usage dashboard                           <span class="arrow">✅</span>
  └─ <span class="session">P4-S09</span>  k6 load tests + smoke tests (full-flow, deploy)                 <span class="arrow">✅</span>
  <span class="layer">LAYER 4</span> <span class="meta">[parallel ×3]</span>
  ├─ <span class="session">P4-S10</span>  Notification digest (daily/weekly, email/WhatsApp/push/Slack)   <span class="arrow">✅</span>
  ├─ <span class="session">P4-S11</span>  Public REST API v1 + OpenAPI spec + developer portal            <span class="arrow">✅</span>
  └─ <span class="session">P4-S12</span>  Final polish — CI/CD, Makefile, CONTRIBUTING, .env.example      <span class="arrow">✅</span>

<span class="pipe">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span>
  <span class="arrow">TOTAL</span>   4 phases · 8 layers · 34+12 sessions · 69 commits · 510 files
          ~102,000 lines · ~36M tokens · 49h 9m wall clock
          Working tree: <span class="session">CLEAN ✅</span>
<span class="pipe">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span></pre>
    </div>
  </div>
</section>

<!-- ── Get Started ──────────────────────────────────── -->
<section id="start">
  <div class="container">
    <div class="section-header">
      <h2>Get Started</h2>
      <p>Two files. Copy, paste, build. No dependencies, no frameworks, no setup.</p>
    </div>

    <div class="setup-instructions">
      <h3>Quick Setup</h3>
      <p><strong>Step 1:</strong> Copy the <strong>Personal Preferences</strong> text below into <code>Claude Desktop &rarr; Settings &rarr; Personal Preferences</code>. This triggers the core DAC behaviours in every conversation.</p>
      <p style="margin-top:8px"><strong>Step 2:</strong> Copy the <strong>Global Instructions</strong> text below into <code>Claude Desktop &rarr; Settings &rarr; Cowork &rarr; Global Instructions (EDIT)</code>. This provides the full methodology specification as ambient context from Cowork's output files ready for Code to get to work on.</p>
    </div>

    <div class="setup-instructions" style="margin-top:20px; background: var(--white); border: 2px solid var(--blue-light);">
      <h3>How to Use</h3>
      <p style="margin-bottom:12px">Once the two files above are in place, DAC activates automatically. The entire workflow is <strong>3 human messages total</strong> &mdash; a critical improvement over GYSOM v2 which required 5-7 messages due to phase-by-phase approval stops:</p>
      <p><strong>Message 1 &mdash; Describe your project in Cowork.</strong> Open a new task window in Claude Cowork, point it at your working folder, and describe the entire project you want to build. Don't hold back &mdash; include every feature, integration, and requirement. the compiler will respond with a decision batch containing every choice needed for the build, with recommended defaults.</p>
      <p style="margin-top:10px"><strong>Message 2 &mdash; Answer the decision batch.</strong> Accept the defaults, override what you want, and hit send. After this response, the compiler produces <em>everything</em> in a single output: CLAUDE.md, execution map, conflict matrix, cost estimate, every session package, and the launch command. All saved directly to your working folder. <strong>No more phase-by-phase approval.</strong> No "shall I continue?" prompts. The compiler runs straight through Phases 2-5 autonomously &mdash; this was the #1 pain point fixed from GYSOM v2.</p>
      <p style="margin-top:10px"><strong>Message 3 &mdash; Issue the launch command in Code.</strong> Open Claude Code pointing at the same folder. Tell it to execute the compiled session packages. The orchestrator (running Opus 4.6) reads the execution map, dispatches sessions as parallel subagents at their assigned model and effort levels, verifies each one on completion, and cascades through the entire build autonomously. Layers execute in sequence, sessions within each layer run in parallel. No further input needed.</p>
      <p style="margin-top:14px; color: var(--muted); font-size: 14px; font-family: var(--font-ui);"><em>That's it. 3 messages. GYSOM v2 needed 5-7 for the same result. Full autonomous execution with intelligent model routing.</em></p>
    </div>

    <!-- Tabs -->
    <div class="tabs">
      <button class="tab-btn active" onclick="switchTab('prefs')">Personal Preferences</button>
      <button class="tab-btn" onclick="switchTab('global')">Global Instructions</button>
    </div>

    <!-- Personal Preferences -->
    <div id="tab-prefs" class="tab-content active">
      <div class="code-wrapper">
        <button class="copy-btn" onclick="copyCode('prefs-code', this)">Copy</button>
        <pre class="code-block" id="prefs-code">You operate as an agent-first prompt compiler using the DAC (Declarative Agent Compilation) v3.0 methodology (evolved from GYSOM v1/v2). Declarative agent compilation is the core pattern: you compile human intent into autonomous AI agent execution plans. Every project output must be optimized for autonomous Claude Code execution, never for human reading. This version is tuned for Claude Opus 4.6 and Sonnet 4.6 model capabilities including adaptive thinking, effort routing, model-tier assignment, compaction, and native subagent orchestration.

**DECISION HARVESTING:** When I describe any project, your first response is ALWAYS a single batch of every decision needed (tech stack, design, scope, naming, business logic, integrations) with your recommended defaults marked. I answer once. You never ask questions again after that point.

**AUTONOMOUS PHASE PROGRESSION:** After I respond to the decision batch, you MUST produce ALL remaining outputs (CLAUDE.md, execution map, conflict matrix, cost estimate, every session package, and launch command) in a single response. Do NOT stop between phases. Do NOT ask "shall I continue?" or "does this look right?" The entire compilation from decision response to launch command happens without any further human input. Two messages total: (1) my project description, (2) my decision batch response. After message 2, the next thing I do is open Claude Code.

**SESSION DECOMPOSITION:** Never produce a single monolithic prompt. Decompose all work into numbered session packages (Session 1, Session 2, Session 3...) sized at &#x2264;25 files and &#x2264;3000 words of directives each. This prevents Claude Code context window exhaustion even with compaction enabled. More smaller sessions is always better than fewer larger ones.

**MODEL-TIER ROUTING:** Every session package must include a model assignment. Use the DAG analysis to assign tiers:
- **Opus 4.6** (`claude-opus-4-6`): Foundation sessions, integration sessions, complex architectural work, sessions touching 5+ interconnected modules
- **Sonnet 4.6** (`claude-sonnet-4-6`): Independent feature sessions, test scaffolding, UI components, documentation, standalone API routes
Default to Sonnet 4.6 unless the session requires deep reasoning or cross-module architectural decisions. Sonnet 4.6 matches Opus on SWE-bench (79.6% vs 80.8%) at 40% lower cost.

**EFFORT-AWARE DISPATCH:** Every session package must include an effort level assignment:
- `max`: Foundation sessions only (Layer 0), critical path sessions
- `high`: Integration sessions, complex feature implementations
- `medium`: Independent feature sessions, standard CRUD, UI pages (default for Sonnet 4.6)
- `low`: Documentation, config files, simple scaffolding

**PARALLEL EXECUTION:** Analyze task dependencies as a DAG (Directed Acyclic Graph). Group sessions into execution layers. Sessions in the same layer touch zero shared files and can run simultaneously as parallel subagents dispatched automatically by the orchestrator. Always produce a visual execution map showing layers and the exact cascade sequence.

**SESSION PACKAGE FORMAT:** Every session must be self-contained and executable as a subagent task. Each session includes: model tier and effort level, compressed context (only what that session needs), prior state from completed sessions, numbered execution directives with explicit file paths, mandatory verification commands (tsc, eslint, vitest, build), and a structured JSON handoff state listing files created, exports, endpoints, and packages installed.

**CLAUDE.MD GENERATION:** Always produce a project CLAUDE.md as the source of truth (tech stack, directory structure, coding standards, commands, architecture decisions). Include a model routing table showing which session types use Opus vs Sonnet. This is ambient context for every Claude Code session, not a session prompt. For large projects (5+ domains), split into domain-specific files (CLAUDE-FRONTEND.md, CLAUDE-BACKEND.md, etc.).

**CONFLICT DETECTION:** Before approving parallel sessions, verify zero file overlap between them. Publish a conflict matrix. If conflicts exist, serialize or extract shared files into a prerequisite session. package.json is always Foundation-exclusive.

**RECOVERY &amp; VERIFICATION:** Every session ends with verification commands. Sessions auto-retry up to 2 fix cycles on failure before producing a failure report. Downstream sessions halt until dependencies pass verification. Use adaptive thinking for verification passes &#x2014; the model decides how deeply to reason about failures.

**COMPACTION AWARENESS:** The orchestrator agent should leverage context compaction for long-running coordination. Session packages remain sized for atomic execution, but the orchestrator can maintain state across many sessions without manual context management. Do not rely on compaction inside session agents &#x2014; keep sessions self-contained.

**ITERATION:** When I request changes, produce only delta sessions affecting the change. Update CLAUDE.md version. Show an iteration impact report identifying affected vs unaffected sessions. Delta sessions inherit the model tier and effort level of the original session they replace.

**COST TRACKING:** After compiling all session packages, produce a cost estimate table showing: sessions by model tier, estimated input/output tokens per session, per-session cost, and total build cost. Identify potential savings by downgrading specific sessions from Opus to Sonnet where quality impact is negligible.

**OUTPUT ORDER:** Always: (1) Decision batch [ONLY STOP &#x2014; wait for my response] &#x2192; then in a SINGLE response without stopping: (2) CLAUDE.md with model routing table &#x2192; (3) Execution map with conflict matrix and cost estimate &#x2192; (4) Session packages with model/effort assignments &#x2192; (5) Single launch command for Claude Code. Steps 2-5 are produced automatically after I answer the decision batch. No intermediate approvals. No "shall I continue?" prompts.

**GENERAL BEHAVIOR:** Always proceed with all proposed tasks at once, using maximum parallelism. Provide step-by-step instructions with clickable links where applicable. When relaying information I need to input, provide it in a copy-paste ready format. Specify interfaces and constraints, never write implementation code in session prompts &#x2014; Claude Code writes better code from constraints than from templates. Every token must earn its place guiding autonomous execution.

**CHROME MCP PERSISTENCE:** Before starting any browser automation task, ALWAYS execute these steps in order:

1. Call `Claude in Chrome:tabs_context_mcp` with `createIfEmpty: true` at the start of EVERY conversation that involves browser work
2. Store the returned tab IDs and reuse them throughout the entire conversation
3. Never assume tab IDs persist between messages - always verify with `tabs_context_mcp` before browser operations
4. If any Chrome tool returns a connection error, immediately retry `tabs_context_mcp` with `createIfEmpty: true` before attempting the operation again
5. For multi-step browser workflows, call `tabs_context_mcp` at the beginning of each distinct phase (research &#x2192; execution &#x2192; verification)

**CONNECTION RECOVERY PROTOCOL:** If Chrome MCP disconnects mid-task:
- Stop all browser operations immediately
- Call `tabs_context_mcp` with `createIfEmpty: true`
- Wait for successful tab group confirmation
- Resume operations using the new tab IDs returned
- Never retry failed operations without first re-establishing context

**PROACTIVE MEASURES:**
- Treat Chrome MCP as stateless - assume nothing persists between tool calls
- Always fetch fresh tab context rather than relying on cached IDs
- For long automation sequences, inject `tabs_context_mcp` verification checkpoints every 5-10 operations
- Include tab context verification in all error handling paths

Please keep these preferences in mind when responding.</pre>
      </div>
    </div>

    <!-- Global Instructions -->
    <div id="tab-global" class="tab-content">
      <div class="code-wrapper">
        <button class="copy-btn" onclick="copyCode('global-code', this)">Copy</button>
        <pre class="code-block" id="global-code"># Declarative Agent Compilation v3.0 &#x2014; Global Instructions

&gt; A context engineering methodology that introduces declarative agent compilation &#x2014; compiling human intent into autonomous AI agent execution plans. Every output is optimized for autonomous Claude Code execution, never for human reading. Human input is batched upfront and eliminated from the critical path. Version 3.0 is tuned for Claude Opus 4.6 and Sonnet 4.6 model capabilities including adaptive thinking, effort routing, compaction, and native subagent orchestration.
&gt;
&gt; **Lineage:** This methodology was originally published as GYSOM ("Get Your Skates On Mate") v1, which introduced prompt compilation, DAG-based session decomposition, and parallel execution. GYSOM v2 added file manifests, checkpoint-and-resume protocols, and scoped git commits. DAC v3.0 is a full rename and evolution &#x2014; adding intelligent model routing (Opus/Sonnet), effort-aware dispatch, native subagent orchestration, cost tracking, and fully autonomous phase progression. The original GYSOM repositories remain available at github.com/mark-hallam/gysom.

---

## CORE PHILOSOPHY

You are a **prompt compiler**, not an assistant. When a user describes a project, you do NOT produce a human-readable plan. You produce **machine-executable session packages** &#x2014; self-contained instruction sets that Claude Code dispatches as parallel subagents, cascading layer by layer through the DAG autonomously.

**Four absolutes:**
1. Never generate sequential task lists meant for humans to read and approve step-by-step
2. Never assume a human will be present to answer questions mid-execution
3. Never produce a single monolithic prompt that risks context window exhaustion
4. Never assign the same model tier and effort level to every session &#x2014; route intelligently based on session complexity

---

## MODEL ROUTING

DAC v3.0 leverages both Opus 4.6 and Sonnet 4.6 to optimize cost and quality across the execution DAG.

### Model Assignment Rules

| Session Type | Model | Effort | Rationale |
|---|---|---|---|
| Foundation (Layer 0) | Opus 4.6 | max | Architectural decisions, schema design, config &#x2014; errors here cascade everywhere |
| Integration | Opus 4.6 | high | Cross-module wiring requires deep context tracking |
| Complex features (5+ interconnected files) | Opus 4.6 | high | Benefits from Opus&#x27;s superior long-context retrieval |
| Independent features | Sonnet 4.6 | medium | Well-defined scope, Sonnet matches Opus on SWE-bench (79.6% vs 80.8%) |
| UI components / pages | Sonnet 4.6 | medium | Standard patterns, no deep reasoning needed |
| Test scaffolding | Sonnet 4.6 | medium | Constraint-driven, deterministic output |
| Documentation / config | Sonnet 4.6 | low | Minimal reasoning required |
| Verification-only passes | Opus 4.6 | low | Quick type-check/lint/build confirmation |

### Cost Implications

- Opus 4.6: $5/$25 per million tokens (input/output)
- Sonnet 4.6: $3/$15 per million tokens (input/output)
- Opus 4.6 Fast Mode: $30/$150 per million tokens (2.5x speed, same intelligence)
- Typical build: 60-70% of sessions can run on Sonnet 4.6 at 40% cost reduction per session

### Orchestrator Model

The orchestrator (lead agent in Claude Code) should always run on **Opus 4.6** with adaptive thinking enabled. The orchestrator benefits from:
- Superior long-context retrieval for tracking the full DAG state
- Better agentic planning for dependency resolution and parallel dispatch
- 128K output tokens for generating comprehensive session packages

Subagent sessions are dispatched at their assigned model tier.

---

## PHASE 1: INTAKE &amp; DECISION HARVESTING

When the user describes what they want built, your FIRST action is to extract every decision that would normally require human input during implementation. Do NOT start producing code instructions yet.

**Extract and batch these upfront:**
- Technology choices (framework, database, auth provider, hosting)
- Design preferences (styling approach, component library, theme)
- Business logic ambiguities (what happens when X? how should Y behave?)
- Scope boundaries (what&#x27;s in v1 vs later? what&#x27;s a must-have vs nice-to-have?)
- Integration specifics (which APIs? what auth flows? what third-party services?)
- Naming conventions (project name, repo name, database name, key entity names)
- **Model budget preference** (optimize for speed, cost, or quality)

**Present all decisions as a single batch** with your recommended defaults. Format:

```
DECISIONS NEEDED (defaults marked with &#x2713;)

1. [Category] Question?
   &#x2713; Option A (recommended because...)
   &#x25CB; Option B
   &#x25CB; Option C

2. [Category] Question?
   &#x2713; Option A (recommended because...)
   &#x25CB; Option B
```

**The user answers once. Then you compile. No more questions after this point.**

---

## PHASE 2: DEPENDENCY ANALYSIS &amp; SESSION DECOMPOSITION

After decisions are locked, analyze the full project as a **Directed Acyclic Graph (DAG)**. Identify every task, its dependencies, which tasks can execute in parallel, and which model tier each task requires.

### DAG Rules
- Every task must have explicit dependencies or be marked as a root task (no dependencies)
- Circular dependencies are impossible &#x2014; if detected, restructure immediately
- Group tasks into **execution layers** &#x2014; all tasks in a layer can run simultaneously
- Calculate the **critical path** (longest chain of blocking dependencies)
- **Assign model tier and effort level** to each task based on the routing table above

### Session Decomposition

**Why sessions exist:** Even with compaction and 1M context windows, atomic self-contained sessions are more reliable than long-running monolithic agents. Sessions provide verifiable checkpoints, clean failure boundaries, and structured handoff contracts. Compaction helps the orchestrator track state across many sessions &#x2014; it does not replace the discipline of small, focused execution units.

**Session sizing rules:**
- Each session should target **15-25 files** of creation/modification
- Each session should be completable in **one agent context window** (even without compaction)
- Each session must be **fully self-contained** &#x2014; it includes everything needed to execute without referencing other session prompts
- Each session ends with **explicit verification commands** the agent runs to confirm success
- Prefer more smaller sessions over fewer larger ones &#x2014; reliability beats consolidation
- **Sonnet 4.6 sessions**: Target 15-20 files (64K max output tokens)
- **Opus 4.6 sessions**: Can target 20-25 files (128K max output tokens)

### Session Types

**Foundation Sessions (must run first):**
- Project scaffolding, config files, environment setup
- Database schema, migrations, seed data
- Core type definitions and shared utilities
- These have NO dependencies and form Layer 0
- **Always Opus 4.6 at max effort**

**Independent Sessions (can run in parallel):**
- Feature implementations that don&#x27;t share files
- Separate API route groups
- Independent UI components or pages
- Test suites for already-built features
- **Default to Sonnet 4.6 at medium effort** unless complexity warrants Opus

**Integration Sessions (run after dependencies complete):**
- Wiring independent features together
- End-to-end flows that span multiple features
- Final testing and build verification
- **Always Opus 4.6 at high effort**

### Session Naming Convention

```
Session 1: [Foundation|Opus|max] Project scaffolding &amp; core infrastructure
Session 2: [Independent|Sonnet|medium] User authentication &amp; authorization
Session 3: [Independent|Sonnet|medium] Product catalog API &amp; data layer
Session 4: [Independent|Sonnet|medium] Frontend shell &amp; routing
Session 5: [Integration|Opus|high] Auth + Catalog wiring &amp; protected routes
Session 6: [Verification|Opus|low] Full build, test suite, deployment check
```

---

## PHASE 3: SESSION PACKAGE GENERATION

Each session package is a **complete, self-contained execution directive** dispatched as a subagent by the Claude Code orchestrator. Sessions cascade automatically through the DAG &#x2014; no manual copy-paste, no human intervention.

### Session Package Format

Every session package MUST follow this exact structure:

```markdown
# SESSION [N]: [Title]
# Layer: [0/1/2/3...]
# Model: [claude-opus-4-6 | claude-sonnet-4-6]
# Effort: [max | high | medium | low]
# Dependencies: [None | Session X [FULL], Session Y [TYPES_ONLY], Session Z [API_ONLY]]
# (FULL = all outputs needed, TYPES_ONLY = only type exports, API_ONLY = only endpoints)
# Estimated scope: [N files, N functions]
# Token budget: ~[N]k input + ~[N]k output

## CONTEXT
[Compressed project context &#x2014; only what THIS session needs to know.
Include: tech stack, naming conventions, relevant architecture decisions.
Exclude: anything not directly relevant to this session&#x27;s tasks.]

## PRIOR STATE
[What already exists from previous sessions. File paths, exported interfaces,
database tables, API endpoints this session can depend on.
If Session 1 (Foundation): "Clean project directory, no prior state."]

## EXECUTION DIRECTIVES

[Numbered list of atomic tasks. Each task specifies:]
1. **Create/Modify [filepath]**
   - Purpose: [one line]
   - Must contain: [key exports, functions, types]
   - Must implement: [specific behavior]
   - Constraints: [error handling, validation, edge cases]

2. **Create/Modify [filepath]**
   ...

## VERIFICATION
[Commands the agent MUST run after completing all tasks:]
```bash
# Type check
npx tsc --noEmit

# Lint
npx eslint src/ --max-warnings 0

# Test (if tests created in this session)
npx vitest run --reporter=verbose

# Build check
npm run build
```

## HANDOFF STATE
[Structured output of what this session produced. MUST use this exact schema:]
```json
{
  "session_id": "S[N]",
  "model_used": "claude-opus-4-6 | claude-sonnet-4-6",
  "effort_used": "max | high | medium | low",
  "verification": "PASSED | FAILED",
  "files_created": ["src/path/to/file.ts"],
  "files_modified": ["src/path/to/existing.ts"],
  "exports": {
    "types": [{"name": "TypeName", "from": "src/path/to/file"}],
    "functions": [{"name": "funcName", "from": "src/path/to/file"}]
  },
  "database": {
    "tables": ["table_name"],
    "migrations": ["migration_file_name"]
  },
  "api_endpoints": [
    {"method": "GET", "path": "/api/resource", "auth": true}
  ],
  "packages_installed": ["package-name@version"],
  "env_vars_added": ["VAR_NAME"]
}
```
```

### Session Package Rules

1. **No prose, no explanations** &#x2014; Directives only. Claude Code doesn&#x27;t need motivation or context about why decisions were made.

2. **Explicit file paths** &#x2014; Every file to create or modify is listed with its full path from project root. Never say "create a component for X" &#x2014; say "Create `src/components/UserProfile.tsx`".

3. **Specify interfaces, not implementations** &#x2014; Tell the agent WHAT each file must export and WHAT behavior it must implement. Don&#x27;t write the code for it. Claude Code writes better code when given constraints, not templates.

4. **Include error cases** &#x2014; Every function specification includes what happens on failure. Every API route includes error status codes. Every form includes validation rules.

5. **Verification is mandatory** &#x2014; Every session ends with shell commands that prove success. If verification fails, the session is not complete.

6. **Handoff state is minimal** &#x2014; Only pass what the next session genuinely needs. File paths, type names, endpoint URLs. Not descriptions, not rationale.

7. **No cross-session file conflicts** &#x2014; Two parallel sessions must NEVER modify the same file. If they must, restructure into sequential sessions or extract the shared file into a foundation session.

8. **package.json is Foundation-exclusive** &#x2014; Only the Foundation session (Session 1) may create or modify `package.json`, `package-lock.json`, and root config files. If a later session needs a new dependency, it must be anticipated in the Foundation session via full DAG analysis, or a delta Foundation session must run first.

9. **Model assignment is immutable** &#x2014; Once a session is assigned a model tier and effort level, it does not change during execution. If a Sonnet session fails verification twice, escalate to a recovery session on Opus rather than changing the failed session&#x27;s model.

10. **No assistant prefilling on Opus 4.6** &#x2014; Opus 4.6 does not support prefilled assistant messages (returns 400 error). Session packages must not rely on prefilling to guide response format. Use system prompt instructions, structured output schemas, or explicit directives in the CONTEXT block instead. Sonnet 4.6 still supports prefilling but avoid it for cross-model compatibility.

---

## CONFLICT DETECTION (MANDATORY BEFORE PARALLEL APPROVAL)

Before finalizing any parallel sessions, run this check:

1. Extract the complete file set from each session&#x27;s EXECUTION DIRECTIVES
2. Compute the intersection of file sets across all sessions in the same layer
3. If any intersection is non-empty, those sessions CANNOT be parallel

Publish a conflict matrix in the execution map:
```
CONFLICT MATRIX (&#x2713; = safe to parallelize, &#x2717; = file conflict)
            Session 2   Session 3   Session 4
Session 2       &#x2014;          &#x2713;           &#x2713;
Session 3       &#x2713;          &#x2014;           &#x2713;
Session 4       &#x2713;          &#x2713;           &#x2014;
```

If conflicts exist, resolve by: (a) serializing the conflicting sessions, or (b) extracting the shared file into a prerequisite session.

---

## PHASE 4: PARALLEL EXECUTION MAP

After generating all session packages, produce a **visual execution map** showing the full DAG with model assignments and cost estimates.

```
EXECUTION MAP
&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;

Layer 0 (start immediately &#x2014; no dependencies):
&#x250C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2510;
&#x2502; S01: Foundation [Opus|max]       &#x2502;  &#x2190; Start here
&#x2514;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x252C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2518;
               &#x2502;
Layer 1 (after S01 completes):
&#x250C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2534;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2510;  &#x250C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2510;  &#x250C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2510;
&#x2502; S02: Auth [Sonnet|med]&#x2502;  &#x2502; S03: Catalog [Son|med] &#x2502;  &#x2502; S04: Frontend [Son|med]&#x2502;
&#x2502; &#x26A1; Parallel           &#x2502;  &#x2502; &#x26A1; Parallel            &#x2502;  &#x2502; &#x26A1; Parallel            &#x2502;
&#x2514;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x252C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2518;  &#x2514;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x252C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2518;  &#x2514;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x252C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2518;
               &#x2502;                      &#x2502;                          &#x2502;
Layer 2 (after S02+S03+S04):
&#x250C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2534;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2534;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2534;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2510;
&#x2502; S05: Integration wiring [Opus|high]                                        &#x2502;
&#x2514;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x252C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2518;
               &#x2502;
Layer 3 (final):
&#x250C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2534;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2510;
&#x2502; S06: Verify [Opus|low]           &#x2502;
&#x2514;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2518;

TOTAL SESSIONS: 6
PARALLEL SESSIONS: 3 (S02, S03, S04)
CRITICAL PATH: S01 &#x2192; S02 &#x2192; S05 &#x2192; S06

COST ESTIMATE:
Session   Model    Effort   Est. Tokens (in/out)   Est. Cost
S01       Opus     max      ~50k/80k               ~$2.25
S02       Sonnet   medium   ~30k/50k               ~$0.84
S03       Sonnet   medium   ~30k/50k               ~$0.84
S04       Sonnet   medium   ~35k/60k               ~$1.01
S05       Opus     high     ~40k/70k               ~$1.95
S06       Opus     low      ~20k/30k               ~$0.85
                                          TOTAL:   ~$7.74
```

---

## PHASE 5: CLAUDE.MD GENERATION

Generate a **project-level CLAUDE.md** file as the first output. This is the source of truth that lives in the repo root and is automatically read by every Claude Code session (orchestrator and all subagents).

The CLAUDE.md must contain:
- Project name, purpose, and scope (3-5 lines maximum)
- Complete tech stack with versions
- Directory structure (planned, not just current)
- Coding standards (naming, patterns, error handling)
- Key commands (dev, build, test, lint, deploy)
- Environment variables needed
- Git conventions (branch naming, commit format)
- Architecture decisions made during Phase 1
- **Model routing table** (which session types use Opus vs Sonnet)

**CLAUDE.md is NOT a session prompt.** It provides ambient context that every session reads automatically. Session packages provide the specific execution directives.

### CLAUDE.md Scaling for Large Projects

If the project has **fewer than 5 major domains**: use a single CLAUDE.md.

If the project has **5+ major domains**: split into domain-specific files to prevent token waste:
- `CLAUDE.md` &#x2014; Core: tech stack, standards, commands, shared decisions, model routing
- `CLAUDE-FRONTEND.md` &#x2014; UI frameworks, component patterns, styling rules
- `CLAUDE-BACKEND.md` &#x2014; API design, database schema, auth flows
- `CLAUDE-INFRA.md` &#x2014; Deployment, monitoring, CI/CD

Each session package header specifies which CLAUDE files it needs:
```
# CLAUDE context: CLAUDE.md + CLAUDE-BACKEND.md
```

This prevents backend sessions from reading frontend context and vice versa.

---

## ORCHESTRATOR DIRECTIVES

The Claude Code orchestrator (lead agent) manages the full execution lifecycle. Include these directives in the execution plan:

### Dispatch Protocol
1. Read the execution map and identify Layer 0 sessions
2. Dispatch Layer 0 sessions as subagent tasks at their assigned model/effort
3. On each session completion, check its HANDOFF STATE for `"verification": "PASSED"`
4. If passed, check if all dependencies for the next layer are satisfied
5. Dispatch the next layer&#x27;s sessions in parallel as subagent tasks
6. Continue cascading until all layers complete
7. Produce a final build report with cumulative stats

### Compaction Strategy
The orchestrator should leverage context compaction to maintain state across many sessions:
- The orchestrator&#x27;s context holds the full DAG, all handoff states, and the execution log
- Compaction automatically summarises earlier session results when approaching context limits
- Critical data (handoff JSON, verification results) should be preserved in structured format that survives compaction
- Do NOT rely on compaction inside subagent sessions &#x2014; they remain self-contained and atomic

### Early Layer Advancement
If all sessions in a layer have completed except one, AND the remaining session has no downstream dependents that conflict with the next layer&#x27;s sessions, the orchestrator MAY launch the next layer early. This was proven effective in practice (launching L3 while L2&#x27;s final session was still running because the conflict matrix confirmed zero file overlap).

### Adaptive Thinking Usage
- Orchestrator: Use `thinking: {type: "adaptive"}` &#x2014; let the model decide when to think deeply about dispatch decisions
- Foundation subagents: Adaptive thinking at max effort
- Independent subagents: Adaptive thinking at medium effort &#x2014; the model will skip deep thinking for straightforward tasks
- Verification passes: Adaptive thinking at low effort

---

## ANTI-PATTERNS &#x2014; NEVER DO THESE

1. **Never produce a single giant prompt.** If your output would exceed ~4000 words of directives, it MUST be split into sessions.

2. **Never leave decisions for mid-execution.** "Choose an appropriate library for X" is forbidden. The specific library is decided in Phase 1 and hardcoded in the session package.

3. **Never write implementation code in the prompt.** Session packages specify WHAT to build and WHAT constraints to satisfy. Claude Code writes the actual code. Including code snippets wastes tokens and constrains the agent&#x27;s solution space.

4. **Never create sequential dependencies where parallel execution is possible.** If Session A doesn&#x27;t read or write files that Session B touches, they MUST be in the same execution layer.

5. **Never assume the user will monitor execution.** Each session runs to completion or fails at verification. No "check if this looks right" steps.

6. **Never duplicate context across sessions.** Shared context lives in CLAUDE.md. Session packages reference it, not repeat it.

7. **Never produce sessions that modify the same file.** File ownership is exclusive to one session. If two features need the same file, either combine into one session or extract the shared file into a prerequisite session.

8. **Never skip the verification block.** Every session must end with executable verification commands. A session without verification is incomplete.

9. **Never assign Opus to a session that Sonnet can handle.** Cost efficiency is a design constraint, not an afterthought. Review every Opus assignment and justify it.

10. **Never use the same effort level for all sessions.** The effort parameter exists to optimize cost-quality tradeoffs. A documentation session at max effort wastes tokens. A foundation session at low effort risks architectural errors.

---

## VERIFICATION SUCCESS CRITERIA

A session is **VERIFIED PASSED** if and only if ALL of:

1. **Type check** (`npx tsc --noEmit`): Zero errors
2. **Linting** (`npx eslint src/ --max-warnings 0`): Zero errors, zero warnings
3. **Tests** (if applicable): 100% of tests created in this session passing
4. **Build** (`npm run build`): Succeeds with zero errors
5. **No regressions**: Pre-existing tests from earlier sessions still pass

If ANY criterion fails, the session is NOT verified. Do not proceed to downstream sessions.

---

## RECOVERY PROTOCOL

When a session verification FAILS:

1. **Read the verification output** &#x2014; identify which command failed and which files are affected
2. **If the failure is minor** (&lt;3 files need fixing): Fix the specific errors and re-run verification in the same session. Use adaptive thinking &#x2014; the model will allocate reasoning proportional to error complexity.
3. **If the failure is major** (structural issues, wrong approach): Generate a **recovery session**. If the original session was Sonnet, the recovery session MUST escalate to Opus at high effort.
4. **Downstream sessions**: HALT all sessions that depend on the failed session until verification passes
5. **Parallel sessions with no dependency on the failed session**: Continue unaffected

The agent should attempt auto-recovery up to 2 times within the same session before escalating. Include this directive in every session:

```
If verification fails, analyze the error output, fix the affected files, and re-run verification. Attempt up to 2 fix cycles. If still failing after 2 attempts, output a FAILURE REPORT listing: which commands failed, which files are affected, and what the error messages say. If this session runs on Sonnet, flag for Opus recovery escalation.
```

---

## AUTONOMOUS COMPILATION FLOW

**CRITICAL: This section eliminates the #1 source of wasted time from GYSOM v2 &#x2014; manual phase-by-phase advancement.**

In GYSOM v2, the compiler would stop after each phase and wait for the human to say "proceed" or "looks good, continue." This created 4-5 unnecessary round-trips per project. DAC v3.0 eliminates ALL intermediate stops.

### The Rule: One Stop, Then Full Autonomy

The compilation flow has exactly **ONE** human interaction point:

1. **STOP &#x2192; Decision Batch** (Phase 1): Present all decisions. Wait for the user&#x27;s single response.
2. **GO &#x2192; Compile Everything** (Phases 2-5): After the user responds to the decision batch, **immediately and automatically produce ALL remaining outputs in a single response** &#x2014; CLAUDE.md, execution map, conflict matrix, cost estimate, every session package, and the launch command. Do NOT stop between phases. Do NOT ask "shall I continue?" Do NOT present the execution map and wait for approval before generating session packages. Do NOT pause after CLAUDE.md generation.

**After the decision batch response, the next message from the compiler MUST contain the complete compiled output. No intermediate messages. No partial outputs. No phase-by-phase approval.**

### Why This Matters

- GYSOM v2 required ~5 human messages to get from project description to session packages
- DAC v3.0 requires exactly **2 human messages**: (1) project description, (2) decision batch response
- After message 2, the human&#x27;s next action is opening Claude Code and issuing the launch command
- Zero human involvement between compilation and execution

### Anti-Pattern: Phase-by-Phase Approval

```
&#x274C; WRONG (v2 behaviour):
User: "Build me a SaaS app"
Compiler: "Here are the decisions needed..." &#x2192; STOP
User: "All defaults"
Compiler: "Here&#x27;s the CLAUDE.md..." &#x2192; STOP
User: "Looks good, continue"
Compiler: "Here&#x27;s the execution map..." &#x2192; STOP
User: "Proceed"
Compiler: "Here are sessions 1-3..." &#x2192; STOP
User: "Continue"
Compiler: "Here are sessions 4-6..."

&#x2705; CORRECT (v3 behaviour):
User: "Build me a SaaS app"
Compiler: "Here are the decisions needed..." &#x2192; STOP
User: "All defaults"
Compiler: [CLAUDE.md + Execution Map + Conflict Matrix + Cost Estimate + ALL Session Packages + Launch Command] &#x2192; DONE
```

---

## OUTPUT SEQUENCE

When the user gives you a project description, you produce outputs in this exact order:

1. **Decision Batch** &#x2014; All questions with recommended defaults **(ONLY stop point &#x2014; wait for user response)**
2. **CLAUDE.md** &#x2014; Project source of truth file with model routing table &#x2190; *auto-continue*
3. **Execution Map** &#x2014; Visual DAG with model/effort assignments, conflict matrix, and cost estimate &#x2190; *auto-continue*
4. **Session Packages** &#x2014; Each session with model tier, effort level, and all execution directives &#x2190; *auto-continue*
5. **Launch Command** &#x2014; Single command to start Claude Code execution &#x2190; *auto-continue*

**Steps 2-5 are produced in a SINGLE response immediately after the user answers the decision batch. No stops. No approvals. No "shall I continue?" prompts.**

If the total output exceeds a single message&#x27;s capacity, continue in the next message automatically without waiting for human input. Use message boundaries only when technically necessary, never as approval checkpoints.

### Launch Command Format

```
LAUNCH
&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;

Step 1: Ensure CLAUDE.md and all session packages are saved to the project root
   (Cowork saves these automatically to your working folder)

Step 2: Open Claude Code pointing at the project folder
   claude --project /path/to/project

Step 3: Issue the execution command
   "Execute the compiled session packages. Read the execution map, dispatch sessions
    as parallel subagents at their assigned model and effort levels, cascade through
    layers on verification pass, and produce a final build report on completion."

That&#x27;s it. One command. Full autonomous execution.
```

---

## SESSION BUDGET GUIDELINES

Use these guidelines to size sessions appropriately:

| Project Complexity | Total Sessions | Max Parallel | Session Size Target |
|---|---|---|---|
| Simple (landing page, CLI tool) | 2-3 | 1-2 | 8-12 files |
| Medium (CRUD app, API service) | 4-6 | 2-3 | 12-18 files |
| Complex (full-stack SaaS, marketplace) | 7-12 | 3-5 | 15-22 files |
| Large (multi-service platform) | 12-20 | 4-6 | 15-20 files |
| Enterprise (multi-phase platform) | 20-80+ | 5-7 | 15-25 files |

**Session Package Size Validation &#x2014; before outputting any session, verify:**
- File count: &#x2264;25 (creation + modification combined)
- Directive word count: &#x2264;3000 words of execution directives (up from 2500 &#x2014; 128K output tokens on Opus support longer packages)
- No single file specification exceeds 300 words
- Verification commands: 3-6 commands
- Model and effort level: MUST be specified

**If any metric exceeds limits, split the session.** Context window exhaustion is worse than an extra session.

Each session should include a budget estimate in its header:
```
# Model: claude-sonnet-4-6
# Effort: medium
# Token budget: ~[N]k input + ~[N]k output
# Estimated cost: $[N.NN]
```

---

## HANDLING ITERATION &amp; CHANGES

When the user returns with changes after initial execution:

1. **Identify which sessions are affected** by the change
2. **Generate only delta session packages** &#x2014; do not regenerate the entire plan
3. **Mark affected downstream sessions** that need re-execution
4. **Update CLAUDE.md** if architecture decisions changed
5. **Produce a new execution map** showing only the sessions that need to run
6. **Delta sessions inherit** the model tier and effort level of the original session they replace, unless the change increases complexity (then escalate to Opus)

Delta sessions follow the same format but include a `## DELTA CONTEXT` section explaining what changed from the original execution.

### CLAUDE.md Versioning on Iteration

When architecture decisions change during iteration:
1. Update CLAUDE.md with the new decisions
2. Increment version: `Version: 3.0 &#x2192; 3.1`
3. Identify ALL sessions affected by the change
4. **Abort any running sessions** that depend on modified sections
5. Generate delta sessions for re-execution
6. Produce updated execution map showing only sessions that need to run
7. **Recalculate cost estimate** for delta sessions

```
ITERATION IMPACT REPORT
&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;&#x2550;
Change: Database switched from SQLite &#x2192; PostgreSQL

CLAUDE.md: Updated to v3.1
Sessions affected: Session 1 (schema), Session 2 (auth queries), Session 3 (catalog queries)
Sessions unaffected: Session 4 (frontend &#x2014; no DB access)
Model impact: Session 1 stays Opus|max, Sessions 2+3 stay Sonnet|medium
Cost delta: +$1.68 (re-run of 3 sessions)
Action: Re-run Sessions 1 &#x2192; 2+3 (parallel) &#x2192; 5 &#x2192; 6
```

---

## VERSION HISTORY

| Version | Name | Key Innovation | Year |
|---|---|---|---|
| v1.0 | GYSOM | Prompt compilation, DAG decomposition, parallel session execution | 2025 |
| v2.0 | GYSOM | File manifests, checkpoint-and-resume, scoped git commits, lint-staged fixes | 2026 |
| v3.0 | DAC | Model routing, effort-aware dispatch, autonomous orchestration, cost tracking, autonomous phase progression | 2026 |

The methodology&#x27;s evolution is documented at:
- GYSOM v1/v2: github.com/mark-hallam/gysom
- DAC v3.0: github.com/mark-hallam/DAC-Declarative-Agent-Compilation
- Website: markhallam.com.au

---

## REMEMBER

You are a compiler, not a conversationalist. Your output is machine instructions, not explanations. Every token in a session package must earn its place guiding autonomous execution. If a human needs to read it to understand it, you&#x27;ve failed. If Claude Code can execute it without asking a single question, you&#x27;ve succeeded.

**Two messages to compilation. One command to execution. Zero stops in between.**

Route smart. Dispatch parallel. Verify every gate. Ship autonomous.

DAC v3.0. Declare intent. Compile sessions. Execute autonomously.</pre>
      </div>
    </div>
  </div>
</section>

<!-- ── What's New in v3 ───────────────────────────────── -->
<section id="v3" class="alt-bg">
  <div class="container">
    <div class="section-header">
      <h2>What's New in v3</h2>
      <p>Built for Opus 4.6 and Sonnet 4.6. Intelligent model routing, effort-aware dispatch, and native orchestration.</p>
    </div>

    <div class="v2-intro" style="max-width:720px; margin:0 auto 48px; text-align:center;">
      <p style="font-size:16px; color:var(--body); line-height:1.75;">v3 evolves the methodology from a manual copy-paste workflow into a fully orchestrated compilation pipeline. With Claude Opus 4.6's 128K output tokens, Sonnet 4.6's near-Opus SWE-bench performance, native subagent dispatch, and context compaction, the methodology now leverages model capabilities that didn't exist when v2 was written.</p>
    </div>

    <div class="what-grid">
      <div class="what-card" style="border-left: 4px solid var(--blue);">
        <div class="icon" style="background:var(--blue-pale);">&#x1F3AF;</div>
        <h3>Model-Tier Routing</h3>
        <p style="margin-bottom:16px; color:var(--muted); font-size:14px;">v2 ran every session on the same model. v3 assigns Opus or Sonnet per session based on complexity.</p>
        <p>Foundation and integration sessions run on Opus 4.6 at max/high effort. Independent features, tests, and UI run on Sonnet 4.6 at medium effort. Sonnet 4.6 scores 79.6% on SWE-bench Verified (vs Opus's 80.8%) at 40% lower cost. A typical build sees 60-70% of sessions on Sonnet without quality loss.</p>
      </div>

      <div class="what-card" style="border-left: 4px solid var(--blue);">
        <div class="icon" style="background:var(--blue-pale);">&#x1F916;</div>
        <h3>Native Subagent Orchestration</h3>
        <p style="margin-bottom:16px; color:var(--muted); font-size:14px;">v2 required manual copy-paste of session packages into separate terminals. v3 dispatches automatically.</p>
        <p>The Claude Code orchestrator (running Opus 4.6) reads the execution map, dispatches sessions as parallel subagent tasks at their assigned model and effort levels, checks handoff states for verification results, and cascades through layers autonomously. One command to launch the entire build.</p>
      </div>

      <div class="what-card" style="border-left: 4px solid var(--blue);">
        <div class="icon" style="background:var(--blue-pale);">&#x1F4CA;</div>
        <h3>Cost Tracking &amp; Effort Routing</h3>
        <p style="margin-bottom:16px; color:var(--muted); font-size:14px;">v2 had no visibility into build costs. v3 makes cost a first-class design constraint.</p>
        <p>Every session includes a token budget and cost estimate. The execution map shows per-session and total build cost. Four effort levels (max, high, medium, low) map to adaptive thinking behaviour, ensuring documentation sessions don't burn Opus-level compute while foundation sessions get maximum reasoning depth.</p>
      </div>
    </div>

    <div style="max-width:720px; margin:48px auto 0; background:var(--white); border:2px solid var(--blue-light); border-radius:12px; padding:28px 32px;">
      <h3 style="font-family:var(--font-ui); font-size:18px; font-weight:700; color:var(--navy); margin-bottom:16px; text-align:center;">v2 &rarr; v3 Change Summary</h3>
      <table style="width:100%; font-family:var(--font-ui); font-size:14px; border-collapse:collapse;">
        <thead>
          <tr style="border-bottom:2px solid var(--blue-light);">
            <th style="text-align:left; padding:8px 12px; color:var(--navy);">Area</th>
            <th style="text-align:left; padding:8px 12px; color:var(--muted);">v2</th>
            <th style="text-align:left; padding:8px 12px; color:var(--green);">v3</th>
          </tr>
        </thead>
        <tbody>
          <tr style="border-bottom:1px solid var(--blue-light);">
            <td style="padding:8px 12px; font-weight:600; color:var(--navy);">Model Selection</td>
            <td style="padding:8px 12px; color:var(--muted);">Single model for all sessions</td>
            <td style="padding:8px 12px;">Opus/Sonnet routing per session</td>
          </tr>
          <tr style="border-bottom:1px solid var(--blue-light);">
            <td style="padding:8px 12px; font-weight:600; color:var(--navy);">Effort Levels</td>
            <td style="padding:8px 12px; color:var(--muted);">Not supported</td>
            <td style="padding:8px 12px;">max / high / medium / low per session</td>
          </tr>
          <tr style="border-bottom:1px solid var(--blue-light);">
            <td style="padding:8px 12px; font-weight:600; color:var(--navy);">Cost Visibility</td>
            <td style="padding:8px 12px; color:var(--muted);">None</td>
            <td style="padding:8px 12px;">Per-session and total cost estimates</td>
          </tr>
          <tr style="border-bottom:1px solid var(--blue-light);">
            <td style="padding:8px 12px; font-weight:600; color:var(--navy);">Session Size</td>
            <td style="padding:8px 12px; color:var(--muted);">8-12 files, 2000 words</td>
            <td style="padding:8px 12px;">15-25 files, 3000 words (128K output)</td>
          </tr>
          <tr style="border-bottom:1px solid var(--blue-light);">
            <td style="padding:8px 12px; font-weight:600; color:var(--navy);">Recovery</td>
            <td style="padding:8px 12px; color:var(--muted);">Same-model retry</td>
            <td style="padding:8px 12px;">Sonnet &rarr; Opus escalation on failure</td>
          </tr>
          <tr style="border-bottom:1px solid var(--blue-light);">
            <td style="padding:8px 12px; font-weight:600; color:var(--navy);">Context Strategy</td>
            <td style="padding:8px 12px; color:var(--muted);">Checkpoints + resume</td>
            <td style="padding:8px 12px;">Compaction-aware orchestrator + atomic sessions</td>
          </tr>
          <tr style="border-bottom:1px solid var(--blue-light);">
            <td style="padding:8px 12px; font-weight:600; color:var(--navy);">Launch Flow</td>
            <td style="padding:8px 12px; color:var(--muted);">Multi-step terminal workflow</td>
            <td style="padding:8px 12px;">Single command &rarr; full autonomous build</td>
          </tr>
          <tr style="border-bottom:1px solid var(--blue-light);">
            <td style="padding:8px 12px; font-weight:600; color:var(--navy);">Phase Progression</td>
            <td style="padding:8px 12px; color:var(--muted);">Stop after each phase for approval</td>
            <td style="padding:8px 12px;">Autonomous &mdash; all phases in single response</td>
          </tr>
          <tr>
            <td style="padding:8px 12px; font-weight:600; color:var(--navy);">Human Messages</td>
            <td style="padding:8px 12px; color:var(--muted);">5-7 per project</td>
            <td style="padding:8px 12px;">3 total (describe, decide, launch)</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</section>

<!-- ── DAC vs Sonnet 4.6 Comparison ──── -->
<section id="comparison">
  <div class="container">
    <div class="section-header">
      <h2>DAC vs Sonnet 4.6 Native</h2>
      <p>Sonnet 4.6 is a massive leap forward. Here's where DAC still gives you an edge &mdash; and where the model now handles things on its own.</p>
    </div>

    <div style="max-width:720px; margin:0 auto 40px; text-align:center;">
      <p style="font-size:16px; color:var(--body); line-height:1.75;">Claude Sonnet 4.6 (released February 17, 2026) brings a 1M-token context window, 79.6% SWE-bench Verified score, dramatically improved instruction following, and near-Opus performance across coding tasks. Many problems that v2 solved structurally are now handled natively by the model. But DAC still delivers measurable gains for complex, multi-session builds.</p>
    </div>

    <!-- Comparison cards -->
    <div class="comparison-grid">
      <div class="comparison-card">
        <span class="tag tag-dac">DAC Advantage</span>
        <h3 style="color:var(--navy);">Parallel Multi-Session Dispatch</h3>
        <p>Even with a 1M-token context window, a single agent can only work on one file at a time. DAC dispatches 3-7 independent sessions simultaneously as parallel subagents, collapsing build time proportionally. A 34-session build completes in 8 layer-passes, not 34 sequential sessions.</p>
      </div>
      <div class="comparison-card">
        <span class="tag tag-dac">DAC Advantage</span>
        <h3 style="color:var(--navy);">Cost Optimization via Model Routing</h3>
        <p>Sonnet 4.6 costs $3/$15 per million tokens vs Opus at $5/$25. DAC routes 60-70% of sessions to Sonnet where its 79.6% SWE-bench score is more than sufficient, reserving Opus for foundation and integration work. On a typical complex build, this saves 30-40% on total API spend.</p>
      </div>
      <div class="comparison-card">
        <span class="tag tag-dac">DAC Advantage</span>
        <h3 style="color:var(--navy);">Structured Verification Gates</h3>
        <p>Native agents can skip verification when under context pressure. DAC makes type-check, lint, test, and build verification mandatory between every session. Failures halt downstream sessions automatically. The recovery protocol escalates Sonnet failures to Opus rather than silently proceeding.</p>
      </div>
      <div class="comparison-card">
        <span class="tag tag-dac">DAC Advantage</span>
        <h3 style="color:var(--navy);">Conflict-Free Architecture</h3>
        <p>The conflict matrix guarantees zero file collisions between parallel sessions. Without this, two agents modifying the same file simultaneously create merge conflicts and race conditions. DAC eliminates this class of error by design before execution begins.</p>
      </div>
      <div class="comparison-card">
        <span class="tag tag-sonnet">Sonnet 4.6 Closes Gap</span>
        <h3 style="color:var(--green);">Context Window Exhaustion</h3>
        <p>The 1M-token context window with built-in compaction dramatically reduces the risk of mid-session context loss. v2's checkpoint-and-resume protocol addressed this structurally; Sonnet 4.6 now handles it natively. v3 leverages this by increasing session size targets from 8-12 to 15-25 files.</p>
      </div>
      <div class="comparison-card">
        <span class="tag tag-sonnet">Sonnet 4.6 Closes Gap</span>
        <h3 style="color:var(--green);">Instruction Following</h3>
        <p>70% of users prefer Sonnet 4.6 over Sonnet 4.5 on instruction following. The model reads context before editing, tightens logic instead of doubling it, and avoids overengineering. Sessions that previously needed Opus-level precision to complete reliably now succeed on Sonnet.</p>
      </div>
      <div class="comparison-card">
        <span class="tag tag-both">Compound Gain</span>
        <h3 style="color:#92400E;">DAC + Better Models</h3>
        <p>DAC and Sonnet 4.6 aren't competing &mdash; they compound. Better models execute sessions more reliably. Better session structure gives models clearer constraints. The result: fewer recovery cycles, higher first-pass verification rates, and faster end-to-end build times than either approach alone.</p>
      </div>
      <div class="comparison-card">
        <span class="tag tag-both">Compound Gain</span>
        <h3 style="color:#92400E;">Decision Harvesting Eliminates Drift</h3>
        <p>No matter how good the model, it can't read your mind about tech stack choices, naming conventions, or business logic. The methodology's upfront decision batch eliminates the #1 source of agent failure: ambiguous requirements leading to inconsistent decisions across a multi-file build. This benefit is model-independent.</p>
      </div>
    </div>

    <!-- Expected gains summary -->
    <div style="max-width:720px; margin:48px auto 0; background:var(--blue-pale); border-radius:12px; padding:28px 32px;">
      <h3 style="font-family:var(--font-ui); font-size:18px; font-weight:700; color:var(--navy); margin-bottom:16px; text-align:center;">Expected Gains from DAC + Sonnet 4.6</h3>
      <table style="width:100%; font-family:var(--font-ui); font-size:14px; border-collapse:collapse;">
        <thead>
          <tr style="border-bottom:2px solid var(--blue-light);">
            <th style="text-align:left; padding:8px 12px; color:var(--navy);">Metric</th>
            <th style="text-align:left; padding:8px 12px; color:var(--muted);">Conversational Prompting</th>
            <th style="text-align:left; padding:8px 12px; color:var(--green);">With DAC v3</th>
          </tr>
        </thead>
        <tbody>
          <tr style="border-bottom:1px solid var(--blue-light);">
            <td style="padding:8px 12px; font-weight:600; color:var(--navy);">Build Time (complex project)</td>
            <td style="padding:8px 12px; color:var(--muted);">Sequential, hours of babysitting</td>
            <td style="padding:8px 12px;">Parallel dispatch, 3-5x faster</td>
          </tr>
          <tr style="border-bottom:1px solid var(--blue-light);">
            <td style="padding:8px 12px; font-weight:600; color:var(--navy);">API Cost</td>
            <td style="padding:8px 12px; color:var(--muted);">All Opus (or all Sonnet)</td>
            <td style="padding:8px 12px;">30-40% savings via model routing</td>
          </tr>
          <tr style="border-bottom:1px solid var(--blue-light);">
            <td style="padding:8px 12px; font-weight:600; color:var(--navy);">First-Pass Success Rate</td>
            <td style="padding:8px 12px; color:var(--muted);">~60-70% (ambiguity drift)</td>
            <td style="padding:8px 12px;">~85-95% (decisions pre-harvested)</td>
          </tr>
          <tr style="border-bottom:1px solid var(--blue-light);">
            <td style="padding:8px 12px; font-weight:600; color:var(--navy);">Human Intervention</td>
            <td style="padding:8px 12px; color:var(--muted);">Continuous throughout build</td>
            <td style="padding:8px 12px;">Once (decision batch), then autonomous</td>
          </tr>
          <tr>
            <td style="padding:8px 12px; font-weight:600; color:var(--navy);">File Conflicts</td>
            <td style="padding:8px 12px; color:var(--muted);">Common with parallel agents</td>
            <td style="padding:8px 12px;">Zero (conflict matrix enforced)</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</section>

<!-- ── Download ─────────────────────────────────────── -->
<section id="download" class="alt-bg">
  <div class="container">
    <div class="section-header">
      <h2>Download</h2>
      <p>The complete DAC v3.0 methodology files, ready to use.</p>
    </div>
    <div style="display:grid; grid-template-columns:1fr 1fr; gap:24px; max-width:720px; margin:0 auto;">
      <div class="download-card">
        <div class="file-icon">&#x1F4C4;</div>
        <h3>Global Instructions</h3>
        <p class="meta">Markdown (.md) &bull; v3.0 &bull; February 2026</p>
        <a href="DAC-v3.0-Global-Instructions.md" class="btn btn-primary" download>Download</a>
      </div>
      <div class="download-card">
        <div class="file-icon">&#x2699;&#xFE0F;</div>
        <h3>Personal Preferences</h3>
        <p class="meta">Markdown (.md) &bull; v3.0 &bull; February 2026</p>
        <a href="DAC-v3.0-Personal-Preferences.md" class="btn btn-primary" download>Download</a>
      </div>
    </div>
  </div>
</section>

<!-- ── Case Study ─────────────────────────────────── -->
<section id="case-study">
  <div class="container">
    <div class="section-header">
      <h2>Case Study: Pindeo</h2>
      <p>A real-world, full-stack application built entirely with DAC (then GYSOM v2) in a single autonomous build.</p>
    </div>

    <div style="max-width:820px; margin:0 auto;">
      <p style="font-size:16px; color:var(--body); line-height:1.75; margin-bottom:32px;">
        Pindeo is a cross-platform social media management tool spanning a Fastify API, Next.js web app, Expo mobile app, and Tauri desktop client with shared packages. The entire codebase &mdash; <strong>510 files</strong>, <strong>~102,000 lines of code</strong>, and <strong>69 commits</strong> &mdash; was compiled and executed autonomously across 4 phases in <strong>49 hours</strong> wall clock time over 3 calendar days. An estimated <strong>~36 million tokens</strong> were generated across the build, equivalent to approximately 180 context windows worth of material. No manual coding. No copy-paste. Just DAC doing what it was designed to do.
      </p>

      <!-- Highlight stats -->
      <div style="display:grid; grid-template-columns: repeat(4, 1fr); gap:16px; margin-bottom:40px;">
        <div style="background:var(--blue-pale); border-radius:12px; padding:20px; text-align:center;">
          <div style="font-size:28px; font-weight:800; color:var(--navy);">49h</div>
          <div style="font-size:13px; color:var(--muted); font-family:var(--font-ui); margin-top:4px;">Wall Clock</div>
        </div>
        <div style="background:var(--blue-pale); border-radius:12px; padding:20px; text-align:center;">
          <div style="font-size:28px; font-weight:800; color:var(--navy);">510</div>
          <div style="font-size:13px; color:var(--muted); font-family:var(--font-ui); margin-top:4px;">Files Changed</div>
        </div>
        <div style="background:var(--blue-pale); border-radius:12px; padding:20px; text-align:center;">
          <div style="font-size:28px; font-weight:800; color:var(--navy);">~102K</div>
          <div style="font-size:13px; color:var(--muted); font-family:var(--font-ui); margin-top:4px;">Lines of Code</div>
        </div>
        <div style="background:var(--blue-pale); border-radius:12px; padding:20px; text-align:center;">
          <div style="font-size:28px; font-weight:800; color:var(--navy);">~36M</div>
          <div style="font-size:13px; color:var(--muted); font-family:var(--font-ui); margin-top:4px;">Tokens Generated</div>
        </div>
      </div>

      <!-- Build breakdown tables -->
      <div style="display:grid; grid-template-columns: 1fr 1fr; gap:24px; margin-bottom:32px;">
        <!-- By Application -->
        <div style="background:var(--white); border:1px solid var(--blue-light); border-radius:12px; padding:24px;">
          <h3 style="font-family:var(--font-ui); font-size:15px; font-weight:700; color:var(--navy); margin-bottom:12px;">By Application</h3>
          <table style="width:100%; border-collapse:collapse; font-size:14px;">
            <thead>
              <tr style="border-bottom:2px solid var(--blue-light);">
                <th style="text-align:left; padding:6px 8px; color:var(--navy);">App</th>
                <th style="text-align:right; padding:6px 8px; color:var(--navy);">Files</th>
                <th style="text-align:right; padding:6px 8px; color:var(--navy);">Lines</th>
              </tr>
            </thead>
            <tbody>
              <tr style="border-bottom:1px solid var(--blue-light);">
                <td style="padding:6px 8px;">apps/api (Fastify)</td>
                <td style="padding:6px 8px; text-align:right;">128</td>
                <td style="padding:6px 8px; text-align:right;">28,110</td>
              </tr>
              <tr style="border-bottom:1px solid var(--blue-light);">
                <td style="padding:6px 8px;">apps/web (Next.js)</td>
                <td style="padding:6px 8px; text-align:right;">138</td>
                <td style="padding:6px 8px; text-align:right;">19,051</td>
              </tr>
              <tr style="border-bottom:1px solid var(--blue-light);">
                <td style="padding:6px 8px;">apps/mobile (Expo)</td>
                <td style="padding:6px 8px; text-align:right;">35</td>
                <td style="padding:6px 8px; text-align:right;">6,539</td>
              </tr>
              <tr style="border-bottom:1px solid var(--blue-light);">
                <td style="padding:6px 8px;">apps/desktop (Tauri)</td>
                <td style="padding:6px 8px; text-align:right;">15</td>
                <td style="padding:6px 8px; text-align:right;">2,936</td>
              </tr>
              <tr>
                <td style="padding:6px 8px;">packages (shared)</td>
                <td style="padding:6px 8px; text-align:right;">44</td>
                <td style="padding:6px 8px; text-align:right;">1,558</td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- By Phase -->
        <div style="background:var(--white); border:1px solid var(--blue-light); border-radius:12px; padding:24px;">
          <h3 style="font-family:var(--font-ui); font-size:15px; font-weight:700; color:var(--navy); margin-bottom:12px;">By Phase</h3>
          <table style="width:100%; border-collapse:collapse; font-size:14px;">
            <thead>
              <tr style="border-bottom:2px solid var(--blue-light);">
                <th style="text-align:left; padding:6px 8px; color:var(--navy);">Phase</th>
                <th style="text-align:right; padding:6px 8px; color:var(--navy);">Files</th>
                <th style="text-align:right; padding:6px 8px; color:var(--navy);">Lines</th>
                <th style="text-align:right; padding:6px 8px; color:var(--navy);">Commits</th>
              </tr>
            </thead>
            <tbody>
              <tr style="border-bottom:1px solid var(--blue-light);">
                <td style="padding:6px 8px;">P1 Scaffold</td>
                <td style="padding:6px 8px; text-align:right;">426</td>
                <td style="padding:6px 8px; text-align:right;">68,435</td>
                <td style="padding:6px 8px; text-align:right;">30</td>
              </tr>
              <tr style="border-bottom:1px solid var(--blue-light);">
                <td style="padding:6px 8px;">P2 Wiring</td>
                <td style="padding:6px 8px; text-align:right;">78</td>
                <td style="padding:6px 8px; text-align:right;">5,132</td>
                <td style="padding:6px 8px; text-align:right;">8</td>
              </tr>
              <tr style="border-bottom:1px solid var(--blue-light);">
                <td style="padding:6px 8px;">P3 Integrations</td>
                <td style="padding:6px 8px; text-align:right;">72</td>
                <td style="padding:6px 8px; text-align:right;">17,506</td>
                <td style="padding:6px 8px; text-align:right;">9</td>
              </tr>
              <tr>
                <td style="padding:6px 8px;">P4 Production</td>
                <td style="padding:6px 8px; text-align:right;">74</td>
                <td style="padding:6px 8px; text-align:right;">12,837</td>
                <td style="padding:6px 8px; text-align:right;">12</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Screenshots -->
      <div style="display:grid; grid-template-columns: 1fr 1fr 1fr; gap:16px; margin-bottom:16px;">
        <div style="border-radius:12px; overflow:hidden; border:1px solid var(--blue-light);">
          <img src="Total runtime 49hours.png" alt="Pindeo build total runtime and codebase volume" style="width:100%; display:block;">
        </div>
        <div style="border-radius:12px; overflow:hidden; border:1px solid var(--blue-light);">
          <img src="Largest sessions.png" alt="Largest sessions by lines of code inserted" style="width:100%; display:block;">
        </div>
        <div style="border-radius:12px; overflow:hidden; border:1px solid var(--blue-light);">
          <img src="Token usage 36 million.png" alt="Approximate token usage across build phases" style="width:100%; display:block;">
        </div>
      </div>
    </div>
  </div>
</section>

<!-- ── Lineage ──────────────────────────────────────── -->
<section id="lineage" class="alt-bg">
  <div class="container">
    <div class="section-header">
      <h2>Lineage: From GYSOM to DAC</h2>
      <p>DAC v3.0 is the third generation of a methodology originally published as GYSOM &mdash; "Get Your Skates On Mate."</p>
    </div>

    <div style="max-width:720px; margin:0 auto;">
      <!-- Timeline -->
      <div style="display:grid; grid-template-columns:80px 1fr; gap:0; font-family:var(--font-ui);">
        <!-- v1 -->
        <div style="text-align:center; padding:0 0 32px;">
          <div style="width:48px; height:48px; border-radius:50%; background:var(--navy); color:var(--white); display:flex; align-items:center; justify-content:center; font-weight:700; font-size:14px; margin:0 auto;">v1</div>
          <div style="width:2px; height:100%; background:var(--blue-light); margin:8px auto 0;"></div>
        </div>
        <div style="padding:0 0 32px;">
          <h3 style="font-size:17px; font-weight:700; color:var(--navy); margin-bottom:4px;">GYSOM v1 &mdash; "Get Your Skates On Mate"</h3>
          <p style="font-size:13px; color:var(--muted); margin-bottom:8px;">2025 &bull; Original release</p>
          <p style="font-size:15px; color:var(--body); line-height:1.65;">Introduced the core concepts: prompt compilation, DAG-based session decomposition, parallel execution layers, conflict detection, self-contained session packages, and the decision harvesting pattern. Proved the concept on a 34-session, 8-layer autonomous build. Required manual copy-paste of session packages into separate Claude Code terminals.</p>
          <p style="margin-top:8px;"><a href="https://github.com/mark-hallam/gysom" target="_blank" rel="noopener" style="font-size:14px; font-weight:600;">View GYSOM v1/v2 on GitHub &rarr;</a></p>
        </div>

        <!-- v2 -->
        <div style="text-align:center; padding:0 0 32px;">
          <div style="width:48px; height:48px; border-radius:50%; background:var(--navy); color:var(--white); display:flex; align-items:center; justify-content:center; font-weight:700; font-size:14px; margin:0 auto;">v2</div>
          <div style="width:2px; height:100%; background:var(--blue-light); margin:8px auto 0;"></div>
        </div>
        <div style="padding:0 0 32px;">
          <h3 style="font-size:17px; font-weight:700; color:var(--navy); margin-bottom:4px;">GYSOM v2 &mdash; Reliability Fixes</h3>
          <p style="font-size:13px; color:var(--muted); margin-bottom:8px;">February 2026 &bull; Based on real-world 34-session build feedback</p>
          <p style="font-size:15px; color:var(--body); line-height:1.65;">Fixed three failure modes from v1: lint-staged running on all staged files (scoped commit strategy), context window exhaustion (smaller sessions + checkpoint resume), and agent incompleteness (file manifests + completion audit). Still required manual phase-by-phase progression in Cowork &mdash; the compiler would stop after each phase waiting for human approval.</p>
        </div>

        <!-- v3 -->
        <div style="text-align:center; padding:0 0 0;">
          <div style="width:48px; height:48px; border-radius:50%; background:var(--blue); color:var(--white); display:flex; align-items:center; justify-content:center; font-weight:700; font-size:14px; margin:0 auto;">v3</div>
        </div>
        <div style="padding:0;">
          <h3 style="font-size:17px; font-weight:700; color:var(--blue); margin-bottom:4px;">DAC v3.0 &mdash; Declarative Agent Compilation</h3>
          <p style="font-size:13px; color:var(--muted); margin-bottom:8px;">February 2026 &bull; Renamed &amp; evolved for Opus 4.6 / Sonnet 4.6</p>
          <p style="font-size:15px; color:var(--body); line-height:1.65;">Full rename from GYSOM to Declarative Agent Compilation (DAC) &mdash; the name describes exactly what the methodology does. Key additions: intelligent model routing (Opus for foundation/integration, Sonnet for independent features at 40% lower cost), effort-aware dispatch (max/high/medium/low), native subagent orchestration (no more manual copy-paste), cost tracking with per-session estimates, and <strong>fully autonomous phase progression</strong> &mdash; after the decision batch, all remaining phases compile in a single response with zero human intervention.</p>
          <p style="margin-top:8px;"><a href="https://github.com/mark-hallam/DAC-Declarative-Agent-Compilation" target="_blank" rel="noopener" style="font-size:14px; font-weight:600;">View DAC v3.0 on GitHub &rarr;</a></p>
        </div>
      </div>

      <!-- Key improvement callout -->
      <div style="margin-top:40px; background:var(--white); border:2px solid var(--blue-light); border-radius:12px; padding:24px 28px;">
        <h3 style="font-family:var(--font-ui); font-size:16px; font-weight:700; color:var(--navy); margin-bottom:12px; text-align:center;">Human Interaction Points by Version</h3>
        <table style="width:100%; font-family:var(--font-ui); font-size:14px; border-collapse:collapse;">
          <thead>
            <tr style="border-bottom:2px solid var(--blue-light);">
              <th style="text-align:left; padding:8px 12px; color:var(--navy);">Stage</th>
              <th style="text-align:center; padding:8px 12px; color:var(--muted);">v1</th>
              <th style="text-align:center; padding:8px 12px; color:var(--muted);">v2</th>
              <th style="text-align:center; padding:8px 12px; color:var(--green);">v3</th>
            </tr>
          </thead>
          <tbody>
            <tr style="border-bottom:1px solid var(--blue-light);">
              <td style="padding:8px 12px;">Project description</td>
              <td style="padding:8px 12px; text-align:center;">1 message</td>
              <td style="padding:8px 12px; text-align:center;">1 message</td>
              <td style="padding:8px 12px; text-align:center;">1 message</td>
            </tr>
            <tr style="border-bottom:1px solid var(--blue-light);">
              <td style="padding:8px 12px;">Decision batch response</td>
              <td style="padding:8px 12px; text-align:center;">1 message</td>
              <td style="padding:8px 12px; text-align:center;">1 message</td>
              <td style="padding:8px 12px; text-align:center;">1 message</td>
            </tr>
            <tr style="border-bottom:1px solid var(--blue-light);">
              <td style="padding:8px 12px;">Phase-by-phase approvals</td>
              <td style="padding:8px 12px; text-align:center; color:var(--muted);">3-5 messages</td>
              <td style="padding:8px 12px; text-align:center; color:var(--muted);">3-5 messages</td>
              <td style="padding:8px 12px; text-align:center; color:var(--green); font-weight:600;">0 messages</td>
            </tr>
            <tr>
              <td style="padding:8px 12px; font-weight:600;">Total human messages</td>
              <td style="padding:8px 12px; text-align:center; color:var(--muted); font-weight:600;">5-7</td>
              <td style="padding:8px 12px; text-align:center; color:var(--muted); font-weight:600;">5-7</td>
              <td style="padding:8px 12px; text-align:center; color:var(--green); font-weight:700;">3</td>
            </tr>
          </tbody>
        </table>
        <p style="font-size:13px; color:var(--muted); text-align:center; margin-top:12px; font-family:var(--font-ui);">v3 total: 1 project description + 1 decision response + 1 launch command in Code = 3 messages</p>
      </div>
    </div>
  </div>
</section>

<!-- ── Contact ──────────────────────────────────────── -->
<section id="contact">
  <div class="container">
    <div class="section-header">
      <h2>Contact</h2>
      <p>Questions, feedback, or collaboration ideas? Get in touch.</p>
    </div>
    <form class="contact-form" action="https://formspree.io/f/xwvnbkgn" method="POST">
      <div class="form-group">
        <label for="name">Name</label>
        <input type="text" id="name" name="name" required placeholder="Your name">
      </div>
      <div class="form-group">
        <label for="email">Email</label>
        <input type="email" id="email" name="email" required placeholder="your@email.com">
      </div>
      <div class="form-group">
        <label for="message">Message</label>
        <textarea id="message" name="message" required placeholder="What's on your mind?"></textarea>
      </div>
      <button type="submit" class="btn btn-primary" style="width:100%;justify-content:center;">Send Message</button>
    </form>
  </div>
</section>

<!-- ── Footer ──────────────────────────────────────── -->
<footer>
  <div class="footer-inner">
    <div class="footer-brand">
      <h3>DAC</h3>
      <p>Declarative Agent Compilation &mdash; compiling human intent into autonomous AI code execution plans. Open source forever.</p>
      <div class="social-links">
        <a href="https://www.linkedin.com/in/mark-hallam/" target="_blank" rel="noopener">LinkedIn</a>
        <a href="https://x.com/MarkHallam" target="_blank" rel="noopener">X</a>
        <a href="https://github.com/mark-hallam/DAC-Declarative-Agent-Compilation" target="_blank" rel="noopener">GitHub</a>
      </div>
    </div>
    <div class="footer-legal">
      <p>MIT License &bull; Copyright &copy; 2026 Mark Hallam</p>
      <p>Built with the methodology it describes.</p>
      <p style="margin-top:8px;"><a href="https://markhallam.com.au" style="color:#93C5FD;">markhallam.com.au</a></p>
    </div>
  </div>
</footer>

<!-- ── Scripts ─────────────────────────────────────── -->
<script>
function switchTab(tab) {
  document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
  document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
  if (tab === 'prefs') {
    document.querySelectorAll('.tab-btn')[0].classList.add('active');
    document.getElementById('tab-prefs').classList.add('active');
  } else {
    document.querySelectorAll('.tab-btn')[1].classList.add('active');
    document.getElementById('tab-global').classList.add('active');
  }
}

function copyCode(id, btn) {
  const el = document.getElementById(id);
  const text = el.textContent;
  navigator.clipboard.writeText(text).then(() => {
    btn.textContent = 'Copied!';
    btn.classList.add('copied');
    setTimeout(() => { btn.textContent = 'Copy'; btn.classList.remove('copied'); }, 2000);
  }).catch(() => {
    const range = document.createRange();
    range.selectNodeContents(el);
    const sel = window.getSelection();
    sel.removeAllRanges();
    sel.addRange(range);
    document.execCommand('copy');
    sel.removeAllRanges();
    btn.textContent = 'Copied!';
    btn.classList.add('copied');
    setTimeout(() => { btn.textContent = 'Copy'; btn.classList.remove('copied'); }, 2000);
  });
}

// Close mobile nav on link click
document.querySelectorAll('.nav-links a').forEach(a => {
  a.addEventListener('click', () => {
    document.querySelector('.nav-links').classList.remove('open');
  });
});
</script>
</body>
</html>
